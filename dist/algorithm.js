(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("jquery"), require("knockout"));
	else if(typeof define === 'function' && define.amd)
		define("algorithm", ["jquery", "knockout"], factory);
	else if(typeof exports === 'object')
		exports["algorithm"] = factory(require("jquery"), require("knockout"));
	else
		root["algorithm"] = factory(root["jQuery"], root["ko"]);
})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_1__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 7);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_0__;

/***/ }),
/* 1 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_1__;

/***/ }),
/* 2 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 3 */
/***/ (function(module, exports) {

module.exports = "<script type=\"text/html\" id=\"algorithm-view-template\">\r\n    <!-- ko with: $data -->\r\n    <div class=\"algorithm-view-holder\">\r\n        <!-- ko if: addonsTemplate -->\r\n        <div class=\"algorithm-addons\" data-bind=\"style: { 'width': addonsWidth() + 'px' }\">\r\n            <!-- ko foreach: blocks -->\r\n            <div class=\"algorithm-addon-holder\" data-bind=\"style: { 'height': height() + 'px', 'marginBottom': $parent.blockMinDistance() + 'px' }\">\r\n                <!-- ko template: $parent.addonsTemplate -->\r\n                <!-- /ko -->\r\n            </div>\r\n            <!-- /ko -->\r\n        </div>\r\n        <!-- /ko -->\r\n        <div class=\"algorithm-transitions\" data-bind=\"style: { 'left': addonsWidth() + 'px', 'width': connectorsAreaWidth() + 'px' }\">\r\n            <!-- ko foreach: transitions -->\r\n            <!-- ko template: template -->\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n        </div>\r\n        <div class=\"algorithm-blocks\" data-bind=\"draggableblocks: $data, style: { 'left': addonsWidth() + connectorsAreaWidth() + 'px', width: blockWidth() + 'px' }\">\r\n            <!-- ko foreach: blocks -->\r\n            <!-- ko template: template -->\r\n            <!-- /ko -->\r\n            <!-- /ko -->\r\n        </div>\r\n        <div class=\"algorithm-comments\" data-bind=\"style: { 'top': -blockMinDistance() + 'px', 'left': addonsWidth() + connectorsAreaWidth() + blockWidth() + 'px', width: commentWidth() + 'px' }\">\r\n            <!-- ko foreach: blocks -->\r\n            <div style=\"position: relative\" data-bind=\"style: { 'height': height() + 'px', 'lineHeight': height() + 'px', 'margin': $parent.blockMinDistance() + 'px 0' }\">\r\n                <!-- ko if: comment -->\r\n                <div style=\"position:absolute; top: 0; left:0; width: 40px; height: 100%\">\r\n                    <svg width=\"100%\" height=\"100%\">\r\n                        <line y1=\"50%\" y2=\"50%\" x1=\"0%\" x2=\"100%\" style=\"stroke:gray;\"></line>\r\n                    </svg>\r\n                </div>\r\n                <div class=\"algorithm-comment-content\">\r\n                    <span data-bind=\"text: comment\"></span>\r\n                </div>\r\n                <!-- /ko -->\r\n            </div>\r\n            <!-- /ko -->\r\n        </div>\r\n        <div class=\"algorithm-block-details-container\" data-bind=\"algodetails: $data\">\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n</script>\r\n\r\n<script type=\"text/html\" id=\"algorithm-details-template\">\r\n    <div class=\"algorithm-details-holder\">\r\n        <div class=\"algorithm-details-template-holder\">\r\n            <!-- ko template: { name: detailTemplate, data: currentBlock } -->\r\n            <!-- /ko -->\r\n        </div>\r\n        <div class=\"algorithm-details-actions-holder\">\r\n            <div class=\"algorithm-button\" data-bind=\"click: function() { $data.isEditMode(false); }, text: closeTitle\"></div>\r\n        </div>\r\n    </div>\r\n</script>\r\n\r\n<script type=\"text/html\" id=\"algorithm-default-details-template\">\r\n    <!-- ko with: $data -->\r\n    <div class=\"algo-detail-field\">\r\n        <span class=\"algo-detail-label\">Text: </span>\r\n        <div class=\"algo-detail-value-wrapper\">\r\n            <input class=\"algo-detail-value\" data-bind=\"value: text\" />\r\n        </div>\r\n    </div>\r\n    <div class=\"algo-detail-field\">\r\n        <span class=\"algo-detail-label\">Comment: </span>\r\n        <div class=\"algo-detail-value-wrapper\">\r\n            <input class=\"algo-detail-value\" data-bind=\"value: comment\" />\r\n        </div>\r\n    </div>\r\n    <div class=\"algo-detail-field\">\r\n        <span class=\"algo-detail-label\">State: </span>\r\n        <div class=\"algo-detail-value-wrapper\">\r\n            <select data-bind=\"options: [ 'inprogress', 'completed' ], value: state, optionsCaption: 'Choose state...'\"></select>\r\n        </div>\r\n    </div>\r\n    <div class=\"algo-detail-field\">\r\n        <span class=\"algo-detail-label\">Is Condition: </span>\r\n        <div class=\"algo-detail-value-wrapper\">\r\n            <input type=\"checkbox\" data-bind=\"checked: isCondition\" />\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n</script>"

/***/ }),
/* 4 */
/***/ (function(module, exports) {

module.exports = "<script type=\"text/html\" id=\"algorithm-block-item-template\">\r\n    <div class=\"algorithm-block algorithm-block-item\" data-bind=\"style: { 'height': height() + 'px', 'lineHeight': height() + 'px', 'margin': $parent.blockMinDistance() + 'px 0' }, css: { 'algorithm-block-inprogress': state() === 'inprogress', 'algorithm-block-teminator': isTerminator }, click: function() { $parent.clickBlock($data); }\">\r\n        <div class=\"algorithm-block-shadow\"></div>\r\n        <div class=\"algorithm-block-content\" data-bind=\"style: { 'lineHeight': height() + 'px' }, text: text\"></div>\r\n        <!-- ko if: num() -->\r\n        <div class=\"algorithm-block-num\" data-bind=\"text: num\"></div>\r\n        <!-- /ko -->\r\n        <!-- ko if: state() === \"completed\" -->\r\n        <div style=\"position:absolute; top:-0.5em; line-height: 1em; right:15px;\">\r\n            <span style=\"color: green; font-family: wingdings; font-size: 200%;\">&#252;</span><!-- &#251; -->\r\n        </div>\r\n        <!-- /ko -->\r\n        <!-- ko template: \"algorithm-block-controls\" -->\r\n        <!-- /ko -->\r\n    </div>\r\n</script>\r\n\r\n<script type=\"text/html\" id=\"algorithm-block-condition-template\">\r\n    <div class=\"algorithm-block algorithm-block-condition\" data-bind=\"style: { 'height': height() + 'px', 'lineHeight': height() + 'px', 'margin': $parent.blockMinDistance() + 'px 0' }, click: function() { $parent.clickBlock($data); }\">\r\n        <div class=\"algorithm-block-shadow\">\r\n            <svg width='100%' height='100%' style=\"position:absolute;left:0;\">\r\n                <defs>\r\n                    <filter id=\"algorithm-block-shadow-filter\" x=\"-0.5\" y=\"-0.5\" width=\"200%\" height=\"200%\">\r\n                        <feOffset result=\"offOut\" in=\"SourceAlpha\" dx=\"0\" dy=\"0\" />\r\n                        <feGaussianBlur result=\"blurOut\" in=\"offOut\" stdDeviation=\"0.1\" />\r\n                        <feBlend in=\"SourceGraphic\" in2=\"blurOut\" mode=\"normal\" />\r\n                    </filter>\r\n                </defs>\r\n                <polygon data-bind=\"attr: { 'points': '0 ' + height()/2 + ', ' + $parent.blockWidth()/2 + ' 0, ' + $parent.blockWidth() + ' ' + height()/2 + ', ' + $parent.blockWidth()/2 + ' ' + height() }\" style=\"stroke:gray;stroke-width:1\" filter=\"url(#algorithm-block-shadow-filter)\" />\r\n            </svg>\r\n        </div>\r\n        <svg height=\"100%\" width=\"100%\" style=\"position:absolute;left:0;\">\r\n            <polygon data-bind=\"attr: { 'points': '0 ' + height()/2 + ', ' + $parent.blockWidth()/2 + ' 0, ' + $parent.blockWidth() + ' ' + height()/2 + ', ' + $parent.blockWidth()/2 + ' ' + height() }\" style=\"fill:white;stroke:black;stroke-width:1\" />\r\n        </svg>\r\n        <div class=\"algorithm-condition-content\" data-bind=\"style: { 'lineHeight': height() + 'px' }, text: text\"></div>\r\n        <!-- ko if: num() -->\r\n        <div class=\"algorithm-block-num\" data-bind=\"text: num\"></div>\r\n        <!-- /ko -->\r\n        <!-- ko template: \"algorithm-block-controls\" -->\r\n        <!-- /ko -->\r\n    </div>\r\n</script>\r\n\r\n<script type=\"text/html\" id=\"algorithm-block-controls\">\r\n    <!-- ko if: $parent.allowEdit -->\r\n    <div class=\"algorithm-block-controls\">\r\n        <div class=\"algorithm-block-command algorithm-hint algorithm-block-command-add\" data-bind=\"click: function() { $parent.addBlock($data, true); }, attr: { 'data-title': $parent.addBeforeTitle }\"></div>\r\n        <div class=\"algorithm-block-command algorithm-hint algorithm-block-command-edit\" data-bind=\"click: function() { $parent.editBlock($data); }, attr: { 'data-title': $parent.editTitle }\"></div>\r\n        <div class=\"algorithm-block-command algorithm-hint algorithm-block-command-connect\" draggable=\"true\" data-bind=\"attr: { 'data-title': $parent.connectTitle }\"></div>\r\n        <!-- ko if: $parent.blocks().length > 1 -->\r\n        <div class=\"algorithm-block-command algorithm-hint algorithm-block-command-remove\" data-bind=\"click: function() { $parent.removeBlock($data); }, attr: { 'data-title': $parent.removeTitle }\"></div>\r\n        <!-- /ko -->\r\n        <div class=\"algorithm-block-command algorithm-hint algorithm-block-command-add\" data-bind=\"click: function() { $parent.addBlock($data); }, attr: { 'data-title': $parent.addAfterTitle }\"></div>\r\n    </div>\r\n    <div class=\"algorithm-condition-connector algorithm-condition-connector-no algorithm-hint\" draggable=\"true\" data-bind=\"style: { 'top': height()/2-8 + 'px' }, attr: { 'data-title': $parent.noTitle, 'data-transition': $parent.noTitle }\"></div>\r\n    <!-- /ko -->\r\n</script>\r\n"

/***/ }),
/* 5 */
/***/ (function(module, exports) {

module.exports = "<script type=\"text/html\" id=\"algorithm-tr-direct-template\">\r\n    <div style=\"width:1px; border:1px solid black; border-right:none; position:absolute;\" data-bind=\"style: { top: startBlock().posY() + startBlock().height() + 'px', height: $parent.blockMinDistance() + 'px', left: $parent.connectorsAreaWidth() + $parent.blockWidth() / 2 + 'px' }\">\r\n        <!-- ko if: label() -->\r\n        <div style=\"position:absolute; top:-2px; left:6px; background-color: white;\" data-bind=\"text: label\"></div>\r\n        <!-- /ko -->\r\n    </div>\r\n</script>\r\n\r\n<script type=\"text/html\" id=\"algorithm-tr-far-up-template\">\r\n    <div style=\"border:1px solid black; border-right:none; border-radius: 5px 0 0 5px; position:absolute;\" data-bind=\"style: { top: (endBlock().posY() - $parent.blockMinDistance() / 2 - 1) + 'px', height: (startBlock().posY() - endBlock().posY() + $parent.blockMinDistance() / 2 + startBlock().height() / 2 + 1) + 'px', left: ($parent.connectorsAreaWidth() - level() * $parent.blockMinDistance()) + 'px', width: level() * $parent.blockMinDistance() + $parent.blockWidth() / 2 + 'px' }\">\r\n        <div class=\"connector-far-up-arrow\">\r\n            <svg width=\"100%\" height=\"100%\">\r\n                <line y1=\"25%\" y2=\"50%\" x1=\"50%\" x2=\"100%\" style=\"stroke:black;stroke-width:1\"></line>\r\n                <line y1=\"75%\" y2=\"50%\" x1=\"50%\" x2=\"100%\" style=\"stroke:black;stroke-width:1\"></line>\r\n            </svg>\r\n        </div>\r\n        <div class=\"connector-far-up-arrow-to-block\" style=\"border-right: 1px solid black; position: absolute; top: -1px; right: -1px; height: 10px;\"></div>\r\n        <!-- ko if: label() -->\r\n        <div class=\"connector-label\" data-bind=\"text: label\"></div>\r\n        <!-- /ko -->\r\n    </div>\r\n</script>\r\n\r\n<script type=\"text/html\" id=\"algorithm-tr-far-down-template\">\r\n    <div style=\"border:1px solid black; border-right:none; border-radius: 5px 0 0 5px; position:absolute;\" data-bind=\"style: { top: (startBlock().posY() + startBlock().height() / 2) + 'px', height: (endBlock().posY() - startBlock().posY() - $parent.blockMinDistance() / 2 - endBlock().height() / 2) + 'px', left: ($parent.connectorsAreaWidth() - level() * $parent.blockMinDistance()) + 'px', width: level() * $parent.blockMinDistance() + $parent.blockWidth() / 2 + 'px' }\">\r\n        <div class=\"connector-far-down-arrow\">\r\n            <svg width=\"100%\" height=\"100%\">\r\n                <line y1=\"25%\" y2=\"50%\" x1=\"50%\" x2=\"100%\" style=\"stroke:black;stroke-width:1\"></line>\r\n                <line y1=\"75%\" y2=\"50%\" x1=\"50%\" x2=\"100%\" style=\"stroke:black;stroke-width:1\"></line>\r\n            </svg>\r\n        </div>\r\n        <div class=\"connector-far-down-arrow-to-block\" style=\"border-right: 1px solid black; position: absolute; bottom: -11px; right: -1px; height: 11px;\"></div>\r\n        <!-- ko if: label() -->\r\n        <div class=\"connector-label\" data-bind=\"text: label\"></div>\r\n        <!-- /ko -->\r\n    </div>\r\n</script>\r\n"

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var $ = __webpack_require__(0);
var ko = __webpack_require__(1);
var Algorithm;
(function (Algorithm) {
    var AlgorithmViewModel = (function () {
        function AlgorithmViewModel(options) {
            var _this = this;
            this._MaxId = -1;
            this.blocks = ko.observableArray();
            this.transitions = ko.observableArray();
            this.maxLevel = ko.observable(1);
            this.blockMinDistance = ko.observable(20);
            this.addonsTemplate = ko.observable();
            this.addonsWidth = ko.computed(function () { return !_this.addonsTemplate() ? 0 : _this.containerWidth() * 0.2; });
            this.connectorsAreaWidth = ko.computed(function () { return _this.maxLevel() * _this.blockMinDistance(); });
            this.containerWidth = ko.observable(500);
            this.blockWidth = ko.computed(function () { return (_this.containerWidth() - _this.connectorsAreaWidth() - _this.addonsWidth()) * 0.6; });
            this.commentWidth = ko.computed(function () { return _this.containerWidth() - _this.blockWidth() - _this.connectorsAreaWidth() - _this.addonsWidth(); });
            this.currentBlock = ko.observable();
            this.detailTemplate = "algorithm-default-details-template";
            this.isEditMode = ko.observable(false);
            this.allowEdit = true;
            this._blockMappings = $.extend(true, {}, {
                id: "id",
                text: "text",
                comment: "comment",
                num: "num",
                state: "state",
                detailTemplate: "algorithm-default-details-template",
                new: function (idVal) {
                    return { id: idVal };
                },
                change: function (kind, object) {
                },
                click: function (block) {
                },
                customEdit: function (block) {
                }
            }, options.blockMappings);
            this.detailTemplate = this._blockMappings.detailTemplate;
            this.addonsTemplate(options.addonsTemplate);
            this._transitionMappings = $.extend(true, {}, {
                iid: "iid",
                exit1: "exit1",
                exit2: "exit2",
                new: function (idVal) {
                    return {};
                },
                change: function (kind, object) {
                }
            }, options.transitionMappings);
            this.allowEdit = options.allowEdit !== false;
            options.items.forEach(function (item) {
                var block = new AlgorithmItemBlockModel(item, _this._blockMappings);
                if (block.id() > _this._MaxId) {
                    _this._MaxId = block.id();
                }
                _this.blocks.push(block);
            });
            options.transitions.forEach(function (transition) {
                if (ko.unwrap(transition[_this._transitionMappings.exit1])) {
                    _this.transitions.push(new AlgorithmTransition(_this.findBlock(ko.unwrap(transition[_this._transitionMappings.iid])), _this.findBlock(ko.unwrap(transition[_this._transitionMappings.exit1])), transition, _this._transitionMappings));
                }
                if (ko.unwrap(transition[_this._transitionMappings.exit2])) {
                    var newTransition = new AlgorithmTransition(_this.findBlock(ko.unwrap(transition[_this._transitionMappings.iid])), _this.findBlock(ko.unwrap(transition[_this._transitionMappings.exit2])), transition, _this._transitionMappings);
                    newTransition.label(_this.noTitle);
                    _this.transitions.push(newTransition);
                }
            });
            this._sortBlocks();
            this._updateLayout();
            this.blocks.subscribe(function (changes) {
                changes.forEach(function (change) { return _this._blockMappings.change(change.status, change.value); });
            }, null, "arrayChange");
            this.transitions.subscribe(function (changes) {
                changes.forEach(function (change) { return _this._transitionMappings.change(change.status, change.value); });
            }, null, "arrayChange");
            this.isEditMode.subscribe(function (newValue) {
                if (!newValue) {
                    _this._blockMappings.change("edit", _this.currentBlock());
                }
            });
        }
        AlgorithmViewModel.prototype._collectFollowingBlocks = function (sortResult, filter, otherThreads) {
            var _this = this;
            if (otherThreads === void 0) { otherThreads = []; }
            var followingBlocks = this.blocks().filter(filter), otherThreadsForChild = otherThreads.concat(followingBlocks);
            followingBlocks.forEach(function (currentBlock) {
                var currentBlockHasKnownAncestor = _this._findTransitionsTo(currentBlock).filter(function (transitionTo) { return otherThreads.indexOf(transitionTo.startBlock()) !== -1; }).length !== 0;
                if (sortResult.indexOf(currentBlock) === -1 && !currentBlockHasKnownAncestor) {
                    sortResult.push(currentBlock);
                    while (otherThreadsForChild.indexOf(currentBlock) !== -1) {
                        otherThreadsForChild.splice(otherThreadsForChild.indexOf(currentBlock), 1);
                    }
                    _this._collectFollowingBlocks(sortResult, function (block) { return _this._findTransitionsTo(block).filter(function (transitionTo) { return transitionTo.startBlock() === currentBlock; }).length !== 0; }, otherThreadsForChild);
                }
            });
        };
        AlgorithmViewModel.prototype._sortBlocks = function () {
            var _this = this;
            var sortResult = [];
            this._collectFollowingBlocks(sortResult, function (block) { return _this._findTransitionsTo(block).length === 0; });
            this.blocks(sortResult);
        };
        AlgorithmViewModel.prototype._findTransitionsFrom = function (block) {
            return this.transitions().filter(function (transition) { return transition.startBlock() === block; });
        };
        AlgorithmViewModel.prototype._findTransitionsTo = function (block) {
            return this.transitions().filter(function (transition) { return transition.endBlock() === block; });
        };
        AlgorithmViewModel.prototype._isFitToLayoutLine = function (layoutLine, transitionLine) {
            var result = true;
            layoutLine.forEach(function (tl) {
                if (result) {
                    if (tl.start > transitionLine.start) {
                        result = transitionLine.start + transitionLine.length <= tl.start;
                    }
                    else {
                        result = tl.start + tl.length <= transitionLine.start;
                    }
                }
            });
            return result;
        };
        AlgorithmViewModel.prototype._prepareTransitions = function () {
            var _this = this;
            var farTransitionLines = [];
            var loopTransitions = [];
            this.transitions().forEach(function (transition) {
                if (transition.startBlock() === transition.endBlock()) {
                    loopTransitions.push(transition);
                }
                else {
                    transition.level(1);
                    var startIndex = _this.blocks().indexOf(transition.startBlock());
                    var endIndex = _this.blocks().indexOf(transition.endBlock());
                    if (endIndex - startIndex === 1) {
                        transition.type("direct");
                    }
                    else {
                        transition.type("far");
                        if (endIndex > startIndex) {
                            transition.direction("down");
                            farTransitionLines.push({ transition: transition, start: startIndex, length: endIndex - startIndex });
                        }
                        else {
                            transition.direction("up");
                            farTransitionLines.push({ transition: transition, start: endIndex, length: startIndex - endIndex });
                        }
                    }
                }
            });
            loopTransitions.forEach(function (transition) { _this.transitions.remove(transition); });
            farTransitionLines.sort(function (t1, t2) { return t1.length - t2.length; });
            var layoutLines = [];
            while (farTransitionLines.length > 0) {
                var fitToLine = false;
                layoutLines.forEach(function (layoutLine, index) {
                    if (!fitToLine && _this._isFitToLayoutLine(layoutLine, farTransitionLines[0])) {
                        var transitionLineToPush = farTransitionLines.splice(0, 1)[0];
                        transitionLineToPush.transition.level(index + 1);
                        layoutLine.push(transitionLineToPush);
                        fitToLine = true;
                    }
                });
                if (!fitToLine) {
                    layoutLines.push([]);
                }
            }
            this.maxLevel(layoutLines.length + 1);
        };
        AlgorithmViewModel.prototype._updateLayout = function () {
            var _this = this;
            this.blocks().reduce(function (posY, block) {
                var isStart = _this._findTransitionsTo(block).length === 0;
                var isEnd = _this._findTransitionsFrom(block).length === 0;
                block.isTerminator(isStart || isEnd);
                block.isCondition(_this._findTransitionsFrom(block).filter(function (transition) { return transition.label() === _this.noTitle; }).length !== 0);
                block.posY(posY);
                return posY + block.height() + _this.blockMinDistance();
            }, 0);
            this._prepareTransitions();
        };
        Object.defineProperty(AlgorithmViewModel.prototype, "model", {
            get: function () {
                var model = { items: [], transitions: [] };
                this.blocks().forEach(function (block) { return model.items.push(block.item); });
                this.transitions().forEach(function (transition) { return model.transitions.push(transition.transition); });
                return model;
            },
            enumerable: true,
            configurable: true
        });
        AlgorithmViewModel.prototype.findBlock = function (id) {
            return this.blocks().filter(function (block) { return block.id() === id; })[0];
        };
        AlgorithmViewModel.prototype.addBlock = function (block, isBefore) {
            var _this = this;
            if (isBefore === void 0) { isBefore = false; }
            var newBlock = new AlgorithmItemBlockModel(this._blockMappings.new(++this._MaxId), this._blockMappings);
            this.blocks.splice(this.blocks().indexOf(block) + (isBefore ? 0 : 1), 0, newBlock);
            if (isBefore) {
                this._findTransitionsTo(block).forEach(function (transition) {
                    transition.endBlock(newBlock);
                    _this._transitionMappings.change("edit", transition);
                });
                this.transitions.push(new AlgorithmTransition(newBlock, block, this._transitionMappings.new(++this._MaxId), this._transitionMappings));
            }
            else {
                this._findTransitionsFrom(block).forEach(function (transition) {
                    transition.startBlock(newBlock);
                    _this._transitionMappings.change("edit", transition);
                });
                this.transitions.push(new AlgorithmTransition(block, newBlock, this._transitionMappings.new(++this._MaxId), this._transitionMappings));
            }
            this._updateLayout();
        };
        AlgorithmViewModel.prototype.removeBlock = function (block) {
            var _this = this;
            this._findTransitionsTo(block).forEach(function (transition) {
                _this._findTransitionsFrom(block).forEach(function (transitionFrom) {
                    transition.endBlock(transitionFrom.endBlock());
                    _this._transitionMappings.change("edit", transition);
                });
            });
            this._findTransitionsFrom(block).forEach(function (transition) {
                _this.transitions.remove(transition);
            });
            this.blocks.remove(block);
            this._updateLayout();
        };
        AlgorithmViewModel.prototype.editBlock = function (block) {
            this.currentBlock(block);
            if (!this._blockMappings.customEdit(block)) {
                this.isEditMode(!this.isEditMode());
            }
        };
        AlgorithmViewModel.prototype.clickBlock = function (block) {
            this._blockMappings.click(block);
        };
        AlgorithmViewModel.prototype.updateTransition = function (fromBlock, toBlock, label, preserveTransitions) {
            if (preserveTransitions === void 0) { preserveTransitions = false; }
            var fromTransitions = this._findTransitionsFrom(fromBlock).filter(function (transition) { return transition.label() === label; });
            if (preserveTransitions) {
                if (fromTransitions.filter(function (transition) { return transition.endBlock() === toBlock; }).length === 0) {
                    var newTransition = new AlgorithmTransition(fromBlock, toBlock, this._transitionMappings.new(++this._MaxId), this._transitionMappings);
                    newTransition.label(label);
                    this.transitions.push(newTransition);
                }
            }
            else {
                if (fromTransitions.length === 0) {
                    var newTransition = new AlgorithmTransition(fromBlock, toBlock, this._transitionMappings.new(++this._MaxId), this._transitionMappings);
                    newTransition.label(label);
                    this.transitions.push(newTransition);
                }
                else {
                    fromTransitions[0].endBlock(toBlock);
                    this._transitionMappings.change("edit", fromTransitions[0]);
                    for (var i = 1; i < fromTransitions.length; i++) {
                        this.transitions.remove(fromTransitions[i]);
                    }
                }
            }
            this._updateLayout();
        };
        Object.defineProperty(AlgorithmViewModel.prototype, "addBeforeTitle", {
            get: function () { return AlgorithmViewModel.addBeforeTitle; },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(AlgorithmViewModel.prototype, "addAfterTitle", {
            get: function () { return AlgorithmViewModel.addAfterTitle; },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(AlgorithmViewModel.prototype, "editTitle", {
            get: function () { return AlgorithmViewModel.titleEdit; },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(AlgorithmViewModel.prototype, "removeTitle", {
            get: function () { return AlgorithmViewModel.titleRemove; },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(AlgorithmViewModel.prototype, "connectTitle", {
            get: function () { return AlgorithmViewModel.connectTitle; },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(AlgorithmViewModel.prototype, "yesTitle", {
            get: function () { return AlgorithmViewModel.yesTitle; },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(AlgorithmViewModel.prototype, "noTitle", {
            get: function () { return AlgorithmViewModel.noTitle; },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(AlgorithmViewModel.prototype, "closeTitle", {
            get: function () { return AlgorithmViewModel.closeTitle; },
            enumerable: true,
            configurable: true
        });
        return AlgorithmViewModel;
    }());
    AlgorithmViewModel.yesTitle = "yes";
    AlgorithmViewModel.noTitle = "no";
    AlgorithmViewModel.addBeforeTitle = "Add block before";
    AlgorithmViewModel.addAfterTitle = "Add block after";
    AlgorithmViewModel.titleEdit = "Edit block";
    AlgorithmViewModel.titleRemove = "Remove block";
    AlgorithmViewModel.connectTitle = "Drag to connect to...";
    AlgorithmViewModel.closeTitle = "Close";
    Algorithm.AlgorithmViewModel = AlgorithmViewModel;
    var ItemHolder = (function () {
        function ItemHolder(item, mappings) {
            var _this = this;
            this._mappings = $.extend({}, mappings);
            this._item = item;
            $.each(this._mappings, function (name, value) {
                var _innerName = "_" + name;
                _this[_innerName] = ko.isObservable(_this._item[value]) ? _this._item[value] : ko.observable(_this._item[value]);
                _this[name] = ko.computed({
                    read: function () {
                        return _this[_innerName]();
                    },
                    write: function (val) {
                        _this[_innerName](val);
                        if (!ko.isObservable(_this._item[value])) {
                            _this._item[value] = val;
                        }
                    }
                });
            });
        }
        Object.defineProperty(ItemHolder.prototype, "item", {
            get: function () {
                return this._item;
            },
            enumerable: true,
            configurable: true
        });
        return ItemHolder;
    }());
    Algorithm.ItemHolder = ItemHolder;
    var AlgorithmItemBlockModel = (function (_super) {
        __extends(AlgorithmItemBlockModel, _super);
        function AlgorithmItemBlockModel(item, mappings) {
            var _this = _super.call(this, item, mappings || {
                id: "id",
                text: "text",
                comment: "comment",
                num: "num",
                state: "state"
            }) || this;
            _this.isTerminator = ko.observable(false);
            _this.isCondition = ko.observable(false);
            _this.template = ko.computed(function () {
                return _this.isCondition() ? "algorithm-block-condition-template" : "algorithm-block-item-template";
            });
            _this.height = ko.observable(50);
            _this.posY = ko.observable(0);
            return _this;
        }
        return AlgorithmItemBlockModel;
    }(ItemHolder));
    Algorithm.AlgorithmItemBlockModel = AlgorithmItemBlockModel;
    var AlgorithmTransition = (function (_super) {
        __extends(AlgorithmTransition, _super);
        function AlgorithmTransition(startBlock, endBlock, item, mappings) {
            var _this = _super.call(this, item, mappings || {
                iid: "iid",
                exit1: "exit1",
                exit2: "exit2"
            }) || this;
            _this.startBlock = ko.observable();
            _this.endBlock = ko.observable();
            _this.type = ko.observable("direct");
            _this.direction = ko.observable("down");
            _this.level = ko.observable(1);
            _this.label = ko.observable();
            _this.template = ko.computed(function () {
                if (_this.type() !== "direct") {
                    return _this.direction() === "down" ? "algorithm-tr-far-down-template" : "algorithm-tr-far-up-template";
                }
                return "algorithm-tr-direct-template";
            });
            _this.startBlock(startBlock);
            _this.endBlock(endBlock);
            return _this;
        }
        Object.defineProperty(AlgorithmTransition.prototype, "transition", {
            get: function () {
                if (this.label() !== AlgorithmViewModel.noTitle) {
                    return { iid: this.startBlock().id(), exit1: this.endBlock().id(), exit2: undefined };
                }
                else {
                    return { iid: this.startBlock().id(), exit1: undefined, exit2: this.endBlock().id() };
                }
            },
            enumerable: true,
            configurable: true
        });
        return AlgorithmTransition;
    }(ItemHolder));
    Algorithm.AlgorithmTransition = AlgorithmTransition;
})(Algorithm || (Algorithm = {}));
module.exports = Algorithm;


/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var $ = __webpack_require__(0);
var ko = __webpack_require__(1);
__webpack_require__(2);
var templateA = __webpack_require__(3);
var templateB = __webpack_require__(4);
var templateT = __webpack_require__(5);
var algorithm_1 = __webpack_require__(6);
var Algorithm;
(function (Algorithm) {
    function createFragment(htmlString) {
        var fragment = document.createDocumentFragment(), temp = document.createElement("div");
        temp.innerHTML = htmlString;
        while (temp.firstChild) {
            fragment.appendChild(temp.firstChild);
        }
        return fragment;
    }
    Algorithm.createFragment = createFragment;
    document.body.insertBefore(createFragment(templateA), document.body.childNodes[0]);
    document.body.insertBefore(createFragment(templateB), document.body.childNodes[0]);
    document.body.insertBefore(createFragment(templateT), document.body.childNodes[0]);
    ko.bindingHandlers["algorithm"] = {
        init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
            var options = ko.unwrap(valueAccessor());
            var $algorithmTemplate = $("#algorithm-view-template"), algorithmViewHolderWidth = ko.observable(500), model = ko.observable(new algorithm_1.AlgorithmViewModel(ko.unwrap(options.value))), valueSubscription, childContext = bindingContext.createChildContext(model);
            if (ko.isSubscribable(options.value)) {
                valueSubscription = options.value.subscribe(function (newAlgorithm) { return model(new algorithm_1.AlgorithmViewModel(newAlgorithm)); });
            }
            $(element).children().remove();
            $(element).append($($algorithmTemplate.text()));
            ko.applyBindingsToDescendants(childContext, element);
            var intervalId = setInterval(function () {
                model().containerWidth($(element).find(".algorithm-view-holder").width());
            }, 500);
            ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
                clearInterval(intervalId);
                if (valueSubscription) {
                    valueSubscription.dispose();
                }
            });
            return { controlsDescendantBindings: true };
        },
        update: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
        }
    };
    ko.bindingHandlers["algodetails"] = {
        init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
            var model = ko.unwrap(valueAccessor());
            var $element = $(element), $algorithmTemplate = $("#algorithm-details-template"), childContext = bindingContext.createChildContext(model);
            $(element).children().remove();
            $(element).append($($algorithmTemplate.text()));
            var subscription = model.isEditMode.subscribe(function (value) {
                var originalBlockRect = { top: model.currentBlock().posY() + "px", left: model.connectorsAreaWidth() + "px", height: model.currentBlock().height() + "px", width: model.blockWidth() + "px" };
                if (value) {
                    $element.css(originalBlockRect);
                    $element.show();
                    $element.animate({ "top": "-=" + (model.currentBlock().posY() > 200 ? 200 : model.currentBlock().posY()) + "px", "left": "0", "height": "+=400px", "width": "100%" });
                }
                else {
                    $element.animate(originalBlockRect, {
                        complete: function () {
                            $element.hide();
                        }
                    });
                }
            });
            ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
                subscription.dispose();
            });
            ko.applyBindingsToDescendants(childContext, element);
            return { controlsDescendantBindings: true };
        }
    };
    ko.bindingHandlers["draggableblocks"] = {
        init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
            var model = ko.unwrap(valueAccessor()), $element = $(element), dragEvents = {
                "dragstart": function (ev) {
                    var originalEvent = ev.originalEvent, block = ko.dataFor(originalEvent.target);
                    if (block instanceof algorithm_1.AlgorithmItemBlockModel) {
                        var transitionType = $(ev.target).attr("data-transition");
                        originalEvent.dataTransfer.effectAllowed = "link";
                        originalEvent.dataTransfer.setData("text", JSON.stringify({ "type": "AlgorithmItemBlockModel", "id": block.id(), "transitionType": transitionType }));
                        return true;
                    }
                },
                "dragover": function (ev) {
                    if (ko.dataFor(ev.target) instanceof algorithm_1.AlgorithmItemBlockModel) {
                        ev.preventDefault();
                    }
                },
                "drop": function (ev) {
                    var originalEvent = ev.originalEvent, targetBlock = ko.dataFor(originalEvent.target);
                    if (targetBlock instanceof algorithm_1.AlgorithmItemBlockModel) {
                        var dragDataString = originalEvent.dataTransfer.getData("text");
                        try {
                            var dragData = JSON.parse(dragDataString);
                            if (dragData.type === 'AlgorithmItemBlockModel') {
                                var sourceBlock = model.findBlock(dragData.id);
                                if (!!sourceBlock && !!targetBlock) {
                                    model.updateTransition(sourceBlock, targetBlock, dragData.transitionType, ev.ctrlKey);
                                    ev.stopPropagation();
                                }
                            }
                        }
                        catch (ex) { }
                    }
                }
            };
            $element.bind(dragEvents);
        }
    };
})(Algorithm || (Algorithm = {}));


/***/ })
/******/ ]);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBmOWY4ZjRiZTFhMjdhMTgyOTY1MCIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwge1wicm9vdFwiOlwialF1ZXJ5XCIsXCJjb21tb25qczJcIjpcImpxdWVyeVwiLFwiY29tbW9uanNcIjpcImpxdWVyeVwiLFwiYW1kXCI6XCJqcXVlcnlcIn0iLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIHtcInJvb3RcIjpcImtvXCIsXCJjb21tb25qczJcIjpcImtub2Nrb3V0XCIsXCJjb21tb25qc1wiOlwia25vY2tvdXRcIixcImFtZFwiOlwia25vY2tvdXRcIn0iLCJ3ZWJwYWNrOi8vLy4vc291cmNlcy9hbGdvcml0aG0uc2NzcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2VzL2FsZ29yaXRobS5odG1sIiwid2VicGFjazovLy8uL3NvdXJjZXMvYmxvY2tzLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc291cmNlcy90cmFuc2l0aW9ucy5odG1sIiwid2VicGFjazovLy8uL3NvdXJjZXMvYWxnb3JpdGhtLnRzIiwid2VicGFjazovLy8uL3NvdXJjZXMvYmluZGluZ3MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELE87QUNWQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxtREFBMkMsY0FBYzs7QUFFekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBMkIsMEJBQTBC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UUFBUSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLENBQUM7NEJBQzFDLEVBQUUsRUFBQyxRQUFRLENBQUMsSUFBSSxLQUFLLHlCQUF5QixDQUFDLENBQUMsQ0FBQztnQ0FDN0MsSUFBSSxXQUFXLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7Z0NBQy9DLEVBQUUsRUFBQyxDQUFDLENBQUMsV0FBVyxJQUFJLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO29DQUNoQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLFdBQVcsRUFBRSxRQUFRLENBQUMsY0FBYyxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQztvQ0FDdEYsRUFBRSxDQUFDLGVBQWUsRUFBRSxDQUFDO2dDQUN6QixDQUFDOzRCQUNMLENBQUM7d0JBQ0wsQ0FBQzt3QkFDRCxLQUFLLEVBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ2pCLENBQUM7Z0JBQ0wsQ0FBQzthQUNKLENBQUM7WUFDTixRQUFRLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQzlCLENBQUM7S0FDSixDQUFDO0FBRU4sQ0FBQyxFQS9ITSxTQUFTLEtBQVQsU0FBUyxRQStIZiIsImZpbGUiOiJhbGdvcml0aG0uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJqcXVlcnlcIiksIHJlcXVpcmUoXCJrbm9ja291dFwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcImFsZ29yaXRobVwiLCBbXCJqcXVlcnlcIiwgXCJrbm9ja291dFwiXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJhbGdvcml0aG1cIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJqcXVlcnlcIiksIHJlcXVpcmUoXCJrbm9ja291dFwiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wiYWxnb3JpdGhtXCJdID0gZmFjdG9yeShyb290W1wialF1ZXJ5XCJdLCByb290W1wia29cIl0pO1xufSkodGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8wX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMV9fKSB7XG5yZXR1cm4gXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBpZGVudGl0eSBmdW5jdGlvbiBmb3IgY2FsbGluZyBoYXJtb255IGltcG9ydHMgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0XG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDcpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGY5ZjhmNGJlMWEyN2ExODI5NjUwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzBfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCB7XCJyb290XCI6XCJqUXVlcnlcIixcImNvbW1vbmpzMlwiOlwianF1ZXJ5XCIsXCJjb21tb25qc1wiOlwianF1ZXJ5XCIsXCJhbWRcIjpcImpxdWVyeVwifVxuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMV9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIHtcInJvb3RcIjpcImtvXCIsXCJjb21tb25qczJcIjpcImtub2Nrb3V0XCIsXCJjb21tb25qc1wiOlwia25vY2tvdXRcIixcImFtZFwiOlwia25vY2tvdXRcIn1cbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NvdXJjZXMvYWxnb3JpdGhtLnNjc3Ncbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzY3JpcHQgdHlwZT1cXFwidGV4dC9odG1sXFxcIiBpZD1cXFwiYWxnb3JpdGhtLXZpZXctdGVtcGxhdGVcXFwiPlxcclxcbiAgICA8IS0tIGtvIHdpdGg6ICRkYXRhIC0tPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJhbGdvcml0aG0tdmlldy1ob2xkZXJcXFwiPlxcclxcbiAgICAgICAgPCEtLSBrbyBpZjogYWRkb25zVGVtcGxhdGUgLS0+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJhbGdvcml0aG0tYWRkb25zXFxcIiBkYXRhLWJpbmQ9XFxcInN0eWxlOiB7ICd3aWR0aCc6IGFkZG9uc1dpZHRoKCkgKyAncHgnIH1cXFwiPlxcclxcbiAgICAgICAgICAgIDwhLS0ga28gZm9yZWFjaDogYmxvY2tzIC0tPlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImFsZ29yaXRobS1hZGRvbi1ob2xkZXJcXFwiIGRhdGEtYmluZD1cXFwic3R5bGU6IHsgJ2hlaWdodCc6IGhlaWdodCgpICsgJ3B4JywgJ21hcmdpbkJvdHRvbSc6ICRwYXJlbnQuYmxvY2tNaW5EaXN0YW5jZSgpICsgJ3B4JyB9XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPCEtLSBrbyB0ZW1wbGF0ZTogJHBhcmVudC5hZGRvbnNUZW1wbGF0ZSAtLT5cXHJcXG4gICAgICAgICAgICAgICAgPCEtLSAva28gLS0+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPCEtLSAva28gLS0+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDwhLS0gL2tvIC0tPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiYWxnb3JpdGhtLXRyYW5zaXRpb25zXFxcIiBkYXRhLWJpbmQ9XFxcInN0eWxlOiB7ICdsZWZ0JzogYWRkb25zV2lkdGgoKSArICdweCcsICd3aWR0aCc6IGNvbm5lY3RvcnNBcmVhV2lkdGgoKSArICdweCcgfVxcXCI+XFxyXFxuICAgICAgICAgICAgPCEtLSBrbyBmb3JlYWNoOiB0cmFuc2l0aW9ucyAtLT5cXHJcXG4gICAgICAgICAgICA8IS0tIGtvIHRlbXBsYXRlOiB0ZW1wbGF0ZSAtLT5cXHJcXG4gICAgICAgICAgICA8IS0tIC9rbyAtLT5cXHJcXG4gICAgICAgICAgICA8IS0tIC9rbyAtLT5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiYWxnb3JpdGhtLWJsb2Nrc1xcXCIgZGF0YS1iaW5kPVxcXCJkcmFnZ2FibGVibG9ja3M6ICRkYXRhLCBzdHlsZTogeyAnbGVmdCc6IGFkZG9uc1dpZHRoKCkgKyBjb25uZWN0b3JzQXJlYVdpZHRoKCkgKyAncHgnLCB3aWR0aDogYmxvY2tXaWR0aCgpICsgJ3B4JyB9XFxcIj5cXHJcXG4gICAgICAgICAgICA8IS0tIGtvIGZvcmVhY2g6IGJsb2NrcyAtLT5cXHJcXG4gICAgICAgICAgICA8IS0tIGtvIHRlbXBsYXRlOiB0ZW1wbGF0ZSAtLT5cXHJcXG4gICAgICAgICAgICA8IS0tIC9rbyAtLT5cXHJcXG4gICAgICAgICAgICA8IS0tIC9rbyAtLT5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiYWxnb3JpdGhtLWNvbW1lbnRzXFxcIiBkYXRhLWJpbmQ9XFxcInN0eWxlOiB7ICd0b3AnOiAtYmxvY2tNaW5EaXN0YW5jZSgpICsgJ3B4JywgJ2xlZnQnOiBhZGRvbnNXaWR0aCgpICsgY29ubmVjdG9yc0FyZWFXaWR0aCgpICsgYmxvY2tXaWR0aCgpICsgJ3B4Jywgd2lkdGg6IGNvbW1lbnRXaWR0aCgpICsgJ3B4JyB9XFxcIj5cXHJcXG4gICAgICAgICAgICA8IS0tIGtvIGZvcmVhY2g6IGJsb2NrcyAtLT5cXHJcXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVxcXCJwb3NpdGlvbjogcmVsYXRpdmVcXFwiIGRhdGEtYmluZD1cXFwic3R5bGU6IHsgJ2hlaWdodCc6IGhlaWdodCgpICsgJ3B4JywgJ2xpbmVIZWlnaHQnOiBoZWlnaHQoKSArICdweCcsICdtYXJnaW4nOiAkcGFyZW50LmJsb2NrTWluRGlzdGFuY2UoKSArICdweCAwJyB9XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPCEtLSBrbyBpZjogY29tbWVudCAtLT5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cXFwicG9zaXRpb246YWJzb2x1dGU7IHRvcDogMDsgbGVmdDowOyB3aWR0aDogNDBweDsgaGVpZ2h0OiAxMDAlXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxzdmcgd2lkdGg9XFxcIjEwMCVcXFwiIGhlaWdodD1cXFwiMTAwJVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpbmUgeTE9XFxcIjUwJVxcXCIgeTI9XFxcIjUwJVxcXCIgeDE9XFxcIjAlXFxcIiB4Mj1cXFwiMTAwJVxcXCIgc3R5bGU9XFxcInN0cm9rZTpncmF5O1xcXCI+PC9saW5lPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9zdmc+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJhbGdvcml0aG0tY29tbWVudC1jb250ZW50XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGRhdGEtYmluZD1cXFwidGV4dDogY29tbWVudFxcXCI+PC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPCEtLSAva28gLS0+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPCEtLSAva28gLS0+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImFsZ29yaXRobS1ibG9jay1kZXRhaWxzLWNvbnRhaW5lclxcXCIgZGF0YS1iaW5kPVxcXCJhbGdvZGV0YWlsczogJGRhdGFcXFwiPlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8IS0tIC9rbyAtLT5cXHJcXG48L3NjcmlwdD5cXHJcXG5cXHJcXG48c2NyaXB0IHR5cGU9XFxcInRleHQvaHRtbFxcXCIgaWQ9XFxcImFsZ29yaXRobS1kZXRhaWxzLXRlbXBsYXRlXFxcIj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiYWxnb3JpdGhtLWRldGFpbHMtaG9sZGVyXFxcIj5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImFsZ29yaXRobS1kZXRhaWxzLXRlbXBsYXRlLWhvbGRlclxcXCI+XFxyXFxuICAgICAgICAgICAgPCEtLSBrbyB0ZW1wbGF0ZTogeyBuYW1lOiBkZXRhaWxUZW1wbGF0ZSwgZGF0YTogY3VycmVudEJsb2NrIH0gLS0+XFxyXFxuICAgICAgICAgICAgPCEtLSAva28gLS0+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImFsZ29yaXRobS1kZXRhaWxzLWFjdGlvbnMtaG9sZGVyXFxcIj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJhbGdvcml0aG0tYnV0dG9uXFxcIiBkYXRhLWJpbmQ9XFxcImNsaWNrOiBmdW5jdGlvbigpIHsgJGRhdGEuaXNFZGl0TW9kZShmYWxzZSk7IH0sIHRleHQ6IGNsb3NlVGl0bGVcXFwiPjwvZGl2PlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgIDwvZGl2Plxcclxcbjwvc2NyaXB0PlxcclxcblxcclxcbjxzY3JpcHQgdHlwZT1cXFwidGV4dC9odG1sXFxcIiBpZD1cXFwiYWxnb3JpdGhtLWRlZmF1bHQtZGV0YWlscy10ZW1wbGF0ZVxcXCI+XFxyXFxuICAgIDwhLS0ga28gd2l0aDogJGRhdGEgLS0+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImFsZ28tZGV0YWlsLWZpZWxkXFxcIj5cXHJcXG4gICAgICAgIDxzcGFuIGNsYXNzPVxcXCJhbGdvLWRldGFpbC1sYWJlbFxcXCI+VGV4dDogPC9zcGFuPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiYWxnby1kZXRhaWwtdmFsdWUtd3JhcHBlclxcXCI+XFxyXFxuICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJhbGdvLWRldGFpbC12YWx1ZVxcXCIgZGF0YS1iaW5kPVxcXCJ2YWx1ZTogdGV4dFxcXCIgLz5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiYWxnby1kZXRhaWwtZmllbGRcXFwiPlxcclxcbiAgICAgICAgPHNwYW4gY2xhc3M9XFxcImFsZ28tZGV0YWlsLWxhYmVsXFxcIj5Db21tZW50OiA8L3NwYW4+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJhbGdvLWRldGFpbC12YWx1ZS13cmFwcGVyXFxcIj5cXHJcXG4gICAgICAgICAgICA8aW5wdXQgY2xhc3M9XFxcImFsZ28tZGV0YWlsLXZhbHVlXFxcIiBkYXRhLWJpbmQ9XFxcInZhbHVlOiBjb21tZW50XFxcIiAvPlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJhbGdvLWRldGFpbC1maWVsZFxcXCI+XFxyXFxuICAgICAgICA8c3BhbiBjbGFzcz1cXFwiYWxnby1kZXRhaWwtbGFiZWxcXFwiPlN0YXRlOiA8L3NwYW4+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJhbGdvLWRldGFpbC12YWx1ZS13cmFwcGVyXFxcIj5cXHJcXG4gICAgICAgICAgICA8c2VsZWN0IGRhdGEtYmluZD1cXFwib3B0aW9uczogWyAnaW5wcm9ncmVzcycsICdjb21wbGV0ZWQnIF0sIHZhbHVlOiBzdGF0ZSwgb3B0aW9uc0NhcHRpb246ICdDaG9vc2Ugc3RhdGUuLi4nXFxcIj48L3NlbGVjdD5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiYWxnby1kZXRhaWwtZmllbGRcXFwiPlxcclxcbiAgICAgICAgPHNwYW4gY2xhc3M9XFxcImFsZ28tZGV0YWlsLWxhYmVsXFxcIj5JcyBDb25kaXRpb246IDwvc3Bhbj5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImFsZ28tZGV0YWlsLXZhbHVlLXdyYXBwZXJcXFwiPlxcclxcbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJjaGVja2JveFxcXCIgZGF0YS1iaW5kPVxcXCJjaGVja2VkOiBpc0NvbmRpdGlvblxcXCIgLz5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPCEtLSAva28gLS0+XFxyXFxuPC9zY3JpcHQ+XCJcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vdGV4dC1sb2FkZXIhLi9zb3VyY2VzL2FsZ29yaXRobS5odG1sXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gXCI8c2NyaXB0IHR5cGU9XFxcInRleHQvaHRtbFxcXCIgaWQ9XFxcImFsZ29yaXRobS1ibG9jay1pdGVtLXRlbXBsYXRlXFxcIj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiYWxnb3JpdGhtLWJsb2NrIGFsZ29yaXRobS1ibG9jay1pdGVtXFxcIiBkYXRhLWJpbmQ9XFxcInN0eWxlOiB7ICdoZWlnaHQnOiBoZWlnaHQoKSArICdweCcsICdsaW5lSGVpZ2h0JzogaGVpZ2h0KCkgKyAncHgnLCAnbWFyZ2luJzogJHBhcmVudC5ibG9ja01pbkRpc3RhbmNlKCkgKyAncHggMCcgfSwgY3NzOiB7ICdhbGdvcml0aG0tYmxvY2staW5wcm9ncmVzcyc6IHN0YXRlKCkgPT09ICdpbnByb2dyZXNzJywgJ2FsZ29yaXRobS1ibG9jay10ZW1pbmF0b3InOiBpc1Rlcm1pbmF0b3IgfSwgY2xpY2s6IGZ1bmN0aW9uKCkgeyAkcGFyZW50LmNsaWNrQmxvY2soJGRhdGEpOyB9XFxcIj5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImFsZ29yaXRobS1ibG9jay1zaGFkb3dcXFwiPjwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiYWxnb3JpdGhtLWJsb2NrLWNvbnRlbnRcXFwiIGRhdGEtYmluZD1cXFwic3R5bGU6IHsgJ2xpbmVIZWlnaHQnOiBoZWlnaHQoKSArICdweCcgfSwgdGV4dDogdGV4dFxcXCI+PC9kaXY+XFxyXFxuICAgICAgICA8IS0tIGtvIGlmOiBudW0oKSAtLT5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImFsZ29yaXRobS1ibG9jay1udW1cXFwiIGRhdGEtYmluZD1cXFwidGV4dDogbnVtXFxcIj48L2Rpdj5cXHJcXG4gICAgICAgIDwhLS0gL2tvIC0tPlxcclxcbiAgICAgICAgPCEtLSBrbyBpZjogc3RhdGUoKSA9PT0gXFxcImNvbXBsZXRlZFxcXCIgLS0+XFxyXFxuICAgICAgICA8ZGl2IHN0eWxlPVxcXCJwb3NpdGlvbjphYnNvbHV0ZTsgdG9wOi0wLjVlbTsgbGluZS1oZWlnaHQ6IDFlbTsgcmlnaHQ6MTVweDtcXFwiPlxcclxcbiAgICAgICAgICAgIDxzcGFuIHN0eWxlPVxcXCJjb2xvcjogZ3JlZW47IGZvbnQtZmFtaWx5OiB3aW5nZGluZ3M7IGZvbnQtc2l6ZTogMjAwJTtcXFwiPiYjMjUyOzwvc3Bhbj48IS0tICYjMjUxOyAtLT5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPCEtLSAva28gLS0+XFxyXFxuICAgICAgICA8IS0tIGtvIHRlbXBsYXRlOiBcXFwiYWxnb3JpdGhtLWJsb2NrLWNvbnRyb2xzXFxcIiAtLT5cXHJcXG4gICAgICAgIDwhLS0gL2tvIC0tPlxcclxcbiAgICA8L2Rpdj5cXHJcXG48L3NjcmlwdD5cXHJcXG5cXHJcXG48c2NyaXB0IHR5cGU9XFxcInRleHQvaHRtbFxcXCIgaWQ9XFxcImFsZ29yaXRobS1ibG9jay1jb25kaXRpb24tdGVtcGxhdGVcXFwiPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJhbGdvcml0aG0tYmxvY2sgYWxnb3JpdGhtLWJsb2NrLWNvbmRpdGlvblxcXCIgZGF0YS1iaW5kPVxcXCJzdHlsZTogeyAnaGVpZ2h0JzogaGVpZ2h0KCkgKyAncHgnLCAnbGluZUhlaWdodCc6IGhlaWdodCgpICsgJ3B4JywgJ21hcmdpbic6ICRwYXJlbnQuYmxvY2tNaW5EaXN0YW5jZSgpICsgJ3B4IDAnIH0sIGNsaWNrOiBmdW5jdGlvbigpIHsgJHBhcmVudC5jbGlja0Jsb2NrKCRkYXRhKTsgfVxcXCI+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJhbGdvcml0aG0tYmxvY2stc2hhZG93XFxcIj5cXHJcXG4gICAgICAgICAgICA8c3ZnIHdpZHRoPScxMDAlJyBoZWlnaHQ9JzEwMCUnIHN0eWxlPVxcXCJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRlZnM+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZmlsdGVyIGlkPVxcXCJhbGdvcml0aG0tYmxvY2stc2hhZG93LWZpbHRlclxcXCIgeD1cXFwiLTAuNVxcXCIgeT1cXFwiLTAuNVxcXCIgd2lkdGg9XFxcIjIwMCVcXFwiIGhlaWdodD1cXFwiMjAwJVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGZlT2Zmc2V0IHJlc3VsdD1cXFwib2ZmT3V0XFxcIiBpbj1cXFwiU291cmNlQWxwaGFcXFwiIGR4PVxcXCIwXFxcIiBkeT1cXFwiMFxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgcmVzdWx0PVxcXCJibHVyT3V0XFxcIiBpbj1cXFwib2ZmT3V0XFxcIiBzdGREZXZpYXRpb249XFxcIjAuMVxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZmVCbGVuZCBpbj1cXFwiU291cmNlR3JhcGhpY1xcXCIgaW4yPVxcXCJibHVyT3V0XFxcIiBtb2RlPVxcXCJub3JtYWxcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2ZpbHRlcj5cXHJcXG4gICAgICAgICAgICAgICAgPC9kZWZzPlxcclxcbiAgICAgICAgICAgICAgICA8cG9seWdvbiBkYXRhLWJpbmQ9XFxcImF0dHI6IHsgJ3BvaW50cyc6ICcwICcgKyBoZWlnaHQoKS8yICsgJywgJyArICRwYXJlbnQuYmxvY2tXaWR0aCgpLzIgKyAnIDAsICcgKyAkcGFyZW50LmJsb2NrV2lkdGgoKSArICcgJyArIGhlaWdodCgpLzIgKyAnLCAnICsgJHBhcmVudC5ibG9ja1dpZHRoKCkvMiArICcgJyArIGhlaWdodCgpIH1cXFwiIHN0eWxlPVxcXCJzdHJva2U6Z3JheTtzdHJva2Utd2lkdGg6MVxcXCIgZmlsdGVyPVxcXCJ1cmwoI2FsZ29yaXRobS1ibG9jay1zaGFkb3ctZmlsdGVyKVxcXCIgLz5cXHJcXG4gICAgICAgICAgICA8L3N2Zz5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPHN2ZyBoZWlnaHQ9XFxcIjEwMCVcXFwiIHdpZHRoPVxcXCIxMDAlXFxcIiBzdHlsZT1cXFwicG9zaXRpb246YWJzb2x1dGU7bGVmdDowO1xcXCI+XFxyXFxuICAgICAgICAgICAgPHBvbHlnb24gZGF0YS1iaW5kPVxcXCJhdHRyOiB7ICdwb2ludHMnOiAnMCAnICsgaGVpZ2h0KCkvMiArICcsICcgKyAkcGFyZW50LmJsb2NrV2lkdGgoKS8yICsgJyAwLCAnICsgJHBhcmVudC5ibG9ja1dpZHRoKCkgKyAnICcgKyBoZWlnaHQoKS8yICsgJywgJyArICRwYXJlbnQuYmxvY2tXaWR0aCgpLzIgKyAnICcgKyBoZWlnaHQoKSB9XFxcIiBzdHlsZT1cXFwiZmlsbDp3aGl0ZTtzdHJva2U6YmxhY2s7c3Ryb2tlLXdpZHRoOjFcXFwiIC8+XFxyXFxuICAgICAgICA8L3N2Zz5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImFsZ29yaXRobS1jb25kaXRpb24tY29udGVudFxcXCIgZGF0YS1iaW5kPVxcXCJzdHlsZTogeyAnbGluZUhlaWdodCc6IGhlaWdodCgpICsgJ3B4JyB9LCB0ZXh0OiB0ZXh0XFxcIj48L2Rpdj5cXHJcXG4gICAgICAgIDwhLS0ga28gaWY6IG51bSgpIC0tPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiYWxnb3JpdGhtLWJsb2NrLW51bVxcXCIgZGF0YS1iaW5kPVxcXCJ0ZXh0OiBudW1cXFwiPjwvZGl2PlxcclxcbiAgICAgICAgPCEtLSAva28gLS0+XFxyXFxuICAgICAgICA8IS0tIGtvIHRlbXBsYXRlOiBcXFwiYWxnb3JpdGhtLWJsb2NrLWNvbnRyb2xzXFxcIiAtLT5cXHJcXG4gICAgICAgIDwhLS0gL2tvIC0tPlxcclxcbiAgICA8L2Rpdj5cXHJcXG48L3NjcmlwdD5cXHJcXG5cXHJcXG48c2NyaXB0IHR5cGU9XFxcInRleHQvaHRtbFxcXCIgaWQ9XFxcImFsZ29yaXRobS1ibG9jay1jb250cm9sc1xcXCI+XFxyXFxuICAgIDwhLS0ga28gaWY6ICRwYXJlbnQuYWxsb3dFZGl0IC0tPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJhbGdvcml0aG0tYmxvY2stY29udHJvbHNcXFwiPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiYWxnb3JpdGhtLWJsb2NrLWNvbW1hbmQgYWxnb3JpdGhtLWhpbnQgYWxnb3JpdGhtLWJsb2NrLWNvbW1hbmQtYWRkXFxcIiBkYXRhLWJpbmQ9XFxcImNsaWNrOiBmdW5jdGlvbigpIHsgJHBhcmVudC5hZGRCbG9jaygkZGF0YSwgdHJ1ZSk7IH0sIGF0dHI6IHsgJ2RhdGEtdGl0bGUnOiAkcGFyZW50LmFkZEJlZm9yZVRpdGxlIH1cXFwiPjwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiYWxnb3JpdGhtLWJsb2NrLWNvbW1hbmQgYWxnb3JpdGhtLWhpbnQgYWxnb3JpdGhtLWJsb2NrLWNvbW1hbmQtZWRpdFxcXCIgZGF0YS1iaW5kPVxcXCJjbGljazogZnVuY3Rpb24oKSB7ICRwYXJlbnQuZWRpdEJsb2NrKCRkYXRhKTsgfSwgYXR0cjogeyAnZGF0YS10aXRsZSc6ICRwYXJlbnQuZWRpdFRpdGxlIH1cXFwiPjwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiYWxnb3JpdGhtLWJsb2NrLWNvbW1hbmQgYWxnb3JpdGhtLWhpbnQgYWxnb3JpdGhtLWJsb2NrLWNvbW1hbmQtY29ubmVjdFxcXCIgZHJhZ2dhYmxlPVxcXCJ0cnVlXFxcIiBkYXRhLWJpbmQ9XFxcImF0dHI6IHsgJ2RhdGEtdGl0bGUnOiAkcGFyZW50LmNvbm5lY3RUaXRsZSB9XFxcIj48L2Rpdj5cXHJcXG4gICAgICAgIDwhLS0ga28gaWY6ICRwYXJlbnQuYmxvY2tzKCkubGVuZ3RoID4gMSAtLT5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImFsZ29yaXRobS1ibG9jay1jb21tYW5kIGFsZ29yaXRobS1oaW50IGFsZ29yaXRobS1ibG9jay1jb21tYW5kLXJlbW92ZVxcXCIgZGF0YS1iaW5kPVxcXCJjbGljazogZnVuY3Rpb24oKSB7ICRwYXJlbnQucmVtb3ZlQmxvY2soJGRhdGEpOyB9LCBhdHRyOiB7ICdkYXRhLXRpdGxlJzogJHBhcmVudC5yZW1vdmVUaXRsZSB9XFxcIj48L2Rpdj5cXHJcXG4gICAgICAgIDwhLS0gL2tvIC0tPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiYWxnb3JpdGhtLWJsb2NrLWNvbW1hbmQgYWxnb3JpdGhtLWhpbnQgYWxnb3JpdGhtLWJsb2NrLWNvbW1hbmQtYWRkXFxcIiBkYXRhLWJpbmQ9XFxcImNsaWNrOiBmdW5jdGlvbigpIHsgJHBhcmVudC5hZGRCbG9jaygkZGF0YSk7IH0sIGF0dHI6IHsgJ2RhdGEtdGl0bGUnOiAkcGFyZW50LmFkZEFmdGVyVGl0bGUgfVxcXCI+PC9kaXY+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJhbGdvcml0aG0tY29uZGl0aW9uLWNvbm5lY3RvciBhbGdvcml0aG0tY29uZGl0aW9uLWNvbm5lY3Rvci1ubyBhbGdvcml0aG0taGludFxcXCIgZHJhZ2dhYmxlPVxcXCJ0cnVlXFxcIiBkYXRhLWJpbmQ9XFxcInN0eWxlOiB7ICd0b3AnOiBoZWlnaHQoKS8yLTggKyAncHgnIH0sIGF0dHI6IHsgJ2RhdGEtdGl0bGUnOiAkcGFyZW50Lm5vVGl0bGUsICdkYXRhLXRyYW5zaXRpb24nOiAkcGFyZW50Lm5vVGl0bGUgfVxcXCI+PC9kaXY+XFxyXFxuICAgIDwhLS0gL2tvIC0tPlxcclxcbjwvc2NyaXB0PlxcclxcblwiXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3RleHQtbG9hZGVyIS4vc291cmNlcy9ibG9ja3MuaHRtbFxuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHNjcmlwdCB0eXBlPVxcXCJ0ZXh0L2h0bWxcXFwiIGlkPVxcXCJhbGdvcml0aG0tdHItZGlyZWN0LXRlbXBsYXRlXFxcIj5cXHJcXG4gICAgPGRpdiBzdHlsZT1cXFwid2lkdGg6MXB4OyBib3JkZXI6MXB4IHNvbGlkIGJsYWNrOyBib3JkZXItcmlnaHQ6bm9uZTsgcG9zaXRpb246YWJzb2x1dGU7XFxcIiBkYXRhLWJpbmQ9XFxcInN0eWxlOiB7IHRvcDogc3RhcnRCbG9jaygpLnBvc1koKSArIHN0YXJ0QmxvY2soKS5oZWlnaHQoKSArICdweCcsIGhlaWdodDogJHBhcmVudC5ibG9ja01pbkRpc3RhbmNlKCkgKyAncHgnLCBsZWZ0OiAkcGFyZW50LmNvbm5lY3RvcnNBcmVhV2lkdGgoKSArICRwYXJlbnQuYmxvY2tXaWR0aCgpIC8gMiArICdweCcgfVxcXCI+XFxyXFxuICAgICAgICA8IS0tIGtvIGlmOiBsYWJlbCgpIC0tPlxcclxcbiAgICAgICAgPGRpdiBzdHlsZT1cXFwicG9zaXRpb246YWJzb2x1dGU7IHRvcDotMnB4OyBsZWZ0OjZweDsgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XFxcIiBkYXRhLWJpbmQ9XFxcInRleHQ6IGxhYmVsXFxcIj48L2Rpdj5cXHJcXG4gICAgICAgIDwhLS0gL2tvIC0tPlxcclxcbiAgICA8L2Rpdj5cXHJcXG48L3NjcmlwdD5cXHJcXG5cXHJcXG48c2NyaXB0IHR5cGU9XFxcInRleHQvaHRtbFxcXCIgaWQ9XFxcImFsZ29yaXRobS10ci1mYXItdXAtdGVtcGxhdGVcXFwiPlxcclxcbiAgICA8ZGl2IHN0eWxlPVxcXCJib3JkZXI6MXB4IHNvbGlkIGJsYWNrOyBib3JkZXItcmlnaHQ6bm9uZTsgYm9yZGVyLXJhZGl1czogNXB4IDAgMCA1cHg7IHBvc2l0aW9uOmFic29sdXRlO1xcXCIgZGF0YS1iaW5kPVxcXCJzdHlsZTogeyB0b3A6IChlbmRCbG9jaygpLnBvc1koKSAtICRwYXJlbnQuYmxvY2tNaW5EaXN0YW5jZSgpIC8gMiAtIDEpICsgJ3B4JywgaGVpZ2h0OiAoc3RhcnRCbG9jaygpLnBvc1koKSAtIGVuZEJsb2NrKCkucG9zWSgpICsgJHBhcmVudC5ibG9ja01pbkRpc3RhbmNlKCkgLyAyICsgc3RhcnRCbG9jaygpLmhlaWdodCgpIC8gMiArIDEpICsgJ3B4JywgbGVmdDogKCRwYXJlbnQuY29ubmVjdG9yc0FyZWFXaWR0aCgpIC0gbGV2ZWwoKSAqICRwYXJlbnQuYmxvY2tNaW5EaXN0YW5jZSgpKSArICdweCcsIHdpZHRoOiBsZXZlbCgpICogJHBhcmVudC5ibG9ja01pbkRpc3RhbmNlKCkgKyAkcGFyZW50LmJsb2NrV2lkdGgoKSAvIDIgKyAncHgnIH1cXFwiPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29ubmVjdG9yLWZhci11cC1hcnJvd1xcXCI+XFxyXFxuICAgICAgICAgICAgPHN2ZyB3aWR0aD1cXFwiMTAwJVxcXCIgaGVpZ2h0PVxcXCIxMDAlXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGxpbmUgeTE9XFxcIjI1JVxcXCIgeTI9XFxcIjUwJVxcXCIgeDE9XFxcIjUwJVxcXCIgeDI9XFxcIjEwMCVcXFwiIHN0eWxlPVxcXCJzdHJva2U6YmxhY2s7c3Ryb2tlLXdpZHRoOjFcXFwiPjwvbGluZT5cXHJcXG4gICAgICAgICAgICAgICAgPGxpbmUgeTE9XFxcIjc1JVxcXCIgeTI9XFxcIjUwJVxcXCIgeDE9XFxcIjUwJVxcXCIgeDI9XFxcIjEwMCVcXFwiIHN0eWxlPVxcXCJzdHJva2U6YmxhY2s7c3Ryb2tlLXdpZHRoOjFcXFwiPjwvbGluZT5cXHJcXG4gICAgICAgICAgICA8L3N2Zz5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29ubmVjdG9yLWZhci11cC1hcnJvdy10by1ibG9ja1xcXCIgc3R5bGU9XFxcImJvcmRlci1yaWdodDogMXB4IHNvbGlkIGJsYWNrOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogLTFweDsgcmlnaHQ6IC0xcHg7IGhlaWdodDogMTBweDtcXFwiPjwvZGl2PlxcclxcbiAgICAgICAgPCEtLSBrbyBpZjogbGFiZWwoKSAtLT5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbm5lY3Rvci1sYWJlbFxcXCIgZGF0YS1iaW5kPVxcXCJ0ZXh0OiBsYWJlbFxcXCI+PC9kaXY+XFxyXFxuICAgICAgICA8IS0tIC9rbyAtLT5cXHJcXG4gICAgPC9kaXY+XFxyXFxuPC9zY3JpcHQ+XFxyXFxuXFxyXFxuPHNjcmlwdCB0eXBlPVxcXCJ0ZXh0L2h0bWxcXFwiIGlkPVxcXCJhbGdvcml0aG0tdHItZmFyLWRvd24tdGVtcGxhdGVcXFwiPlxcclxcbiAgICA8ZGl2IHN0eWxlPVxcXCJib3JkZXI6MXB4IHNvbGlkIGJsYWNrOyBib3JkZXItcmlnaHQ6bm9uZTsgYm9yZGVyLXJhZGl1czogNXB4IDAgMCA1cHg7IHBvc2l0aW9uOmFic29sdXRlO1xcXCIgZGF0YS1iaW5kPVxcXCJzdHlsZTogeyB0b3A6IChzdGFydEJsb2NrKCkucG9zWSgpICsgc3RhcnRCbG9jaygpLmhlaWdodCgpIC8gMikgKyAncHgnLCBoZWlnaHQ6IChlbmRCbG9jaygpLnBvc1koKSAtIHN0YXJ0QmxvY2soKS5wb3NZKCkgLSAkcGFyZW50LmJsb2NrTWluRGlzdGFuY2UoKSAvIDIgLSBlbmRCbG9jaygpLmhlaWdodCgpIC8gMikgKyAncHgnLCBsZWZ0OiAoJHBhcmVudC5jb25uZWN0b3JzQXJlYVdpZHRoKCkgLSBsZXZlbCgpICogJHBhcmVudC5ibG9ja01pbkRpc3RhbmNlKCkpICsgJ3B4Jywgd2lkdGg6IGxldmVsKCkgKiAkcGFyZW50LmJsb2NrTWluRGlzdGFuY2UoKSArICRwYXJlbnQuYmxvY2tXaWR0aCgpIC8gMiArICdweCcgfVxcXCI+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb25uZWN0b3ItZmFyLWRvd24tYXJyb3dcXFwiPlxcclxcbiAgICAgICAgICAgIDxzdmcgd2lkdGg9XFxcIjEwMCVcXFwiIGhlaWdodD1cXFwiMTAwJVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxsaW5lIHkxPVxcXCIyNSVcXFwiIHkyPVxcXCI1MCVcXFwiIHgxPVxcXCI1MCVcXFwiIHgyPVxcXCIxMDAlXFxcIiBzdHlsZT1cXFwic3Ryb2tlOmJsYWNrO3N0cm9rZS13aWR0aDoxXFxcIj48L2xpbmU+XFxyXFxuICAgICAgICAgICAgICAgIDxsaW5lIHkxPVxcXCI3NSVcXFwiIHkyPVxcXCI1MCVcXFwiIHgxPVxcXCI1MCVcXFwiIHgyPVxcXCIxMDAlXFxcIiBzdHlsZT1cXFwic3Ryb2tlOmJsYWNrO3N0cm9rZS13aWR0aDoxXFxcIj48L2xpbmU+XFxyXFxuICAgICAgICAgICAgPC9zdmc+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbm5lY3Rvci1mYXItZG93bi1hcnJvdy10by1ibG9ja1xcXCIgc3R5bGU9XFxcImJvcmRlci1yaWdodDogMXB4IHNvbGlkIGJsYWNrOyBwb3NpdGlvbjogYWJzb2x1dGU7IGJvdHRvbTogLTExcHg7IHJpZ2h0OiAtMXB4OyBoZWlnaHQ6IDExcHg7XFxcIj48L2Rpdj5cXHJcXG4gICAgICAgIDwhLS0ga28gaWY6IGxhYmVsKCkgLS0+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb25uZWN0b3ItbGFiZWxcXFwiIGRhdGEtYmluZD1cXFwidGV4dDogbGFiZWxcXFwiPjwvZGl2PlxcclxcbiAgICAgICAgPCEtLSAva28gLS0+XFxyXFxuICAgIDwvZGl2Plxcclxcbjwvc2NyaXB0PlxcclxcblwiXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3RleHQtbG9hZGVyIS4vc291cmNlcy90cmFuc2l0aW9ucy5odG1sXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCAqIGFzICQgZnJvbSBcImpxdWVyeVwiO1xyXG5pbXBvcnQgKiBhcyBrbyBmcm9tIFwia25vY2tvdXRcIjtcclxuXHJcbm1vZHVsZSBBbGdvcml0aG0ge1xyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVRyYW5zaXRpb24ge1xyXG4gICAgICAgIGlpZDogYW55O1xyXG4gICAgICAgIGV4aXQxOiBhbnk7XHJcbiAgICAgICAgZXhpdDI6IGFueTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElUcmFuc2l0aW9uTGluZSB7XHJcbiAgICAgICAgdHJhbnNpdGlvbjogQWxnb3JpdGhtVHJhbnNpdGlvbjtcclxuICAgICAgICBzdGFydDogbnVtYmVyO1xyXG4gICAgICAgIGxlbmd0aDogbnVtYmVyO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBBbGdvcml0aG1WaWV3TW9kZWwge1xyXG4gICAgICAgIHByaXZhdGUgX2Jsb2NrTWFwcGluZ3M7XHJcbiAgICAgICAgcHJpdmF0ZSBfdHJhbnNpdGlvbk1hcHBpbmdzO1xyXG4gICAgICAgIHByaXZhdGUgX01heElkID0gLTE7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX2NvbGxlY3RGb2xsb3dpbmdCbG9ja3Moc29ydFJlc3VsdDogQXJyYXk8QWxnb3JpdGhtSXRlbUJsb2NrTW9kZWw+LCBmaWx0ZXI6IChibG9jazogQWxnb3JpdGhtSXRlbUJsb2NrTW9kZWwpID0+IGJvb2xlYW4sIG90aGVyVGhyZWFkczogQXJyYXk8QWxnb3JpdGhtSXRlbUJsb2NrTW9kZWw+ID0gW10pIHtcclxuICAgICAgICAgICAgdmFyIGZvbGxvd2luZ0Jsb2NrcyA9IHRoaXMuYmxvY2tzKCkuZmlsdGVyKGZpbHRlciksXHJcbiAgICAgICAgICAgICAgICBvdGhlclRocmVhZHNGb3JDaGlsZCA9IG90aGVyVGhyZWFkcy5jb25jYXQoZm9sbG93aW5nQmxvY2tzKTtcclxuICAgICAgICAgICAgZm9sbG93aW5nQmxvY2tzLmZvckVhY2goY3VycmVudEJsb2NrID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50QmxvY2tIYXNLbm93bkFuY2VzdG9yID0gdGhpcy5fZmluZFRyYW5zaXRpb25zVG8oY3VycmVudEJsb2NrKS5maWx0ZXIoKHRyYW5zaXRpb25UbykgPT4geyByZXR1cm4gb3RoZXJUaHJlYWRzLmluZGV4T2YodHJhbnNpdGlvblRvLnN0YXJ0QmxvY2soKSkgIT09IC0xOyB9KS5sZW5ndGggIT09IDA7XHJcbiAgICAgICAgICAgICAgICBpZihzb3J0UmVzdWx0LmluZGV4T2YoY3VycmVudEJsb2NrKSA9PT0gLTEgJiYgIWN1cnJlbnRCbG9ja0hhc0tub3duQW5jZXN0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBzb3J0UmVzdWx0LnB1c2goY3VycmVudEJsb2NrKTtcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZShvdGhlclRocmVhZHNGb3JDaGlsZC5pbmRleE9mKGN1cnJlbnRCbG9jaykgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG90aGVyVGhyZWFkc0ZvckNoaWxkLnNwbGljZShvdGhlclRocmVhZHNGb3JDaGlsZC5pbmRleE9mKGN1cnJlbnRCbG9jayksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb2xsZWN0Rm9sbG93aW5nQmxvY2tzKHNvcnRSZXN1bHQsIGJsb2NrID0+IHsgcmV0dXJuIHRoaXMuX2ZpbmRUcmFuc2l0aW9uc1RvKGJsb2NrKS5maWx0ZXIoKHRyYW5zaXRpb25UbykgPT4geyByZXR1cm4gdHJhbnNpdGlvblRvLnN0YXJ0QmxvY2soKSA9PT0gY3VycmVudEJsb2NrOyB9KS5sZW5ndGggIT09IDA7IH0sIG90aGVyVGhyZWFkc0ZvckNoaWxkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIF9zb3J0QmxvY2tzKCkge1xyXG4gICAgICAgICAgICB2YXIgc29ydFJlc3VsdDogQXJyYXk8QWxnb3JpdGhtSXRlbUJsb2NrTW9kZWw+ID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbGxlY3RGb2xsb3dpbmdCbG9ja3Moc29ydFJlc3VsdCwgYmxvY2sgPT4geyByZXR1cm4gdGhpcy5fZmluZFRyYW5zaXRpb25zVG8oYmxvY2spLmxlbmd0aCA9PT0gMDsgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuYmxvY2tzKHNvcnRSZXN1bHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfZmluZFRyYW5zaXRpb25zRnJvbShibG9jazogQWxnb3JpdGhtSXRlbUJsb2NrTW9kZWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNpdGlvbnMoKS5maWx0ZXIoKHRyYW5zaXRpb24pID0+IHsgcmV0dXJuIHRyYW5zaXRpb24uc3RhcnRCbG9jaygpID09PSBibG9jazsgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIF9maW5kVHJhbnNpdGlvbnNUbyhibG9jazogQWxnb3JpdGhtSXRlbUJsb2NrTW9kZWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNpdGlvbnMoKS5maWx0ZXIoKHRyYW5zaXRpb24pID0+IHsgcmV0dXJuIHRyYW5zaXRpb24uZW5kQmxvY2soKSA9PT0gYmxvY2s7IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfaXNGaXRUb0xheW91dExpbmUobGF5b3V0TGluZTogQXJyYXk8SVRyYW5zaXRpb25MaW5lPiwgdHJhbnNpdGlvbkxpbmU6IElUcmFuc2l0aW9uTGluZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgbGF5b3V0TGluZS5mb3JFYWNoKHRsID0+IHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHRsLnN0YXJ0ID4gdHJhbnNpdGlvbkxpbmUuc3RhcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdHJhbnNpdGlvbkxpbmUuc3RhcnQgKyB0cmFuc2l0aW9uTGluZS5sZW5ndGggPD0gdGwuc3RhcnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB0bC5zdGFydCArIHRsLmxlbmd0aCA8PSB0cmFuc2l0aW9uTGluZS5zdGFydDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfcHJlcGFyZVRyYW5zaXRpb25zKCkge1xyXG4gICAgICAgICAgICB2YXIgZmFyVHJhbnNpdGlvbkxpbmVzOiBBcnJheTxJVHJhbnNpdGlvbkxpbmU+ID0gW107XHJcbiAgICAgICAgICAgIHZhciBsb29wVHJhbnNpdGlvbnMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9ucygpLmZvckVhY2godHJhbnNpdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZih0cmFuc2l0aW9uLnN0YXJ0QmxvY2soKSA9PT0gdHJhbnNpdGlvbi5lbmRCbG9jaygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9vcFRyYW5zaXRpb25zLnB1c2godHJhbnNpdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uLmxldmVsKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGFydEluZGV4ID0gdGhpcy5ibG9ja3MoKS5pbmRleE9mKHRyYW5zaXRpb24uc3RhcnRCbG9jaygpKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kSW5kZXggPSB0aGlzLmJsb2NrcygpLmluZGV4T2YodHJhbnNpdGlvbi5lbmRCbG9jaygpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihlbmRJbmRleCAtIHN0YXJ0SW5kZXggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbi50eXBlKFwiZGlyZWN0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbi50eXBlKFwiZmFyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihlbmRJbmRleCA+IHN0YXJ0SW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb24uZGlyZWN0aW9uKFwiZG93blwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhclRyYW5zaXRpb25MaW5lcy5wdXNoKHsgdHJhbnNpdGlvbjogdHJhbnNpdGlvbiwgc3RhcnQ6IHN0YXJ0SW5kZXgsIGxlbmd0aDogZW5kSW5kZXggLSBzdGFydEluZGV4IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbi5kaXJlY3Rpb24oXCJ1cFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhclRyYW5zaXRpb25MaW5lcy5wdXNoKHsgdHJhbnNpdGlvbjogdHJhbnNpdGlvbiwgc3RhcnQ6IGVuZEluZGV4LCBsZW5ndGg6IHN0YXJ0SW5kZXggLSBlbmRJbmRleCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBsb29wVHJhbnNpdGlvbnMuZm9yRWFjaCh0cmFuc2l0aW9uID0+IHsgdGhpcy50cmFuc2l0aW9ucy5yZW1vdmUodHJhbnNpdGlvbik7IH0pO1xyXG4gICAgICAgICAgICBmYXJUcmFuc2l0aW9uTGluZXMuc29ydCgodDEsIHQyKSA9PiB7IHJldHVybiB0MS5sZW5ndGggLSB0Mi5sZW5ndGg7IH0pO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxheW91dExpbmVzOiBBcnJheTxBcnJheTxJVHJhbnNpdGlvbkxpbmU+PiA9IFtdO1xyXG4gICAgICAgICAgICB3aGlsZShmYXJUcmFuc2l0aW9uTGluZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpdFRvTGluZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0TGluZXMuZm9yRWFjaCgobGF5b3V0TGluZSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZighZml0VG9MaW5lICYmIHRoaXMuX2lzRml0VG9MYXlvdXRMaW5lKGxheW91dExpbmUsIGZhclRyYW5zaXRpb25MaW5lc1swXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zaXRpb25MaW5lVG9QdXNoID0gZmFyVHJhbnNpdGlvbkxpbmVzLnNwbGljZSgwLCAxKVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbkxpbmVUb1B1c2gudHJhbnNpdGlvbi5sZXZlbChpbmRleCArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXRMaW5lLnB1c2godHJhbnNpdGlvbkxpbmVUb1B1c2gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaXRUb0xpbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYoIWZpdFRvTGluZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheW91dExpbmVzLnB1c2goW10pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1heExldmVsKGxheW91dExpbmVzLmxlbmd0aCArIDEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfdXBkYXRlTGF5b3V0KCkge1xyXG4gICAgICAgICAgICB0aGlzLmJsb2NrcygpLnJlZHVjZSgocG9zWTogbnVtYmVyLCBibG9jazogQWxnb3JpdGhtSXRlbUJsb2NrTW9kZWwpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBpc1N0YXJ0ID0gdGhpcy5fZmluZFRyYW5zaXRpb25zVG8oYmxvY2spLmxlbmd0aCA9PT0gMDtcclxuICAgICAgICAgICAgICAgIHZhciBpc0VuZCA9IHRoaXMuX2ZpbmRUcmFuc2l0aW9uc0Zyb20oYmxvY2spLmxlbmd0aCA9PT0gMDtcclxuICAgICAgICAgICAgICAgIGJsb2NrLmlzVGVybWluYXRvcihpc1N0YXJ0IHx8IGlzRW5kKTtcclxuICAgICAgICAgICAgICAgIGJsb2NrLmlzQ29uZGl0aW9uKHRoaXMuX2ZpbmRUcmFuc2l0aW9uc0Zyb20oYmxvY2spLmZpbHRlcih0cmFuc2l0aW9uID0+IHRyYW5zaXRpb24ubGFiZWwoKSA9PT0gdGhpcy5ub1RpdGxlKS5sZW5ndGggIT09IDApO1xyXG4gICAgICAgICAgICAgICAgYmxvY2sucG9zWShwb3NZKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwb3NZICsgYmxvY2suaGVpZ2h0KCkgKyB0aGlzLmJsb2NrTWluRGlzdGFuY2UoKTtcclxuICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3ByZXBhcmVUcmFuc2l0aW9ucygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3RydWN0b3Iob3B0aW9uczogeyBpdGVtczogQXJyYXk8YW55PjsgdHJhbnNpdGlvbnM6IEFycmF5PGFueT47IGJsb2NrTWFwcGluZ3M/OiBhbnk7IHRyYW5zaXRpb25NYXBwaW5ncz86IGFueTsgYWxsb3dFZGl0PzogYm9vbGVhbjsgYWRkb25zVGVtcGxhdGU/OiBzdHJpbmcgfSkge1xyXG4gICAgICAgICAgICB0aGlzLl9ibG9ja01hcHBpbmdzID0gJC5leHRlbmQodHJ1ZSwge30sIHtcclxuICAgICAgICAgICAgICAgIGlkOiBcImlkXCIsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcInRleHRcIixcclxuICAgICAgICAgICAgICAgIGNvbW1lbnQ6IFwiY29tbWVudFwiLFxyXG4gICAgICAgICAgICAgICAgbnVtOiBcIm51bVwiLFxyXG4gICAgICAgICAgICAgICAgc3RhdGU6IFwic3RhdGVcIixcclxuICAgICAgICAgICAgICAgIGRldGFpbFRlbXBsYXRlOiBcImFsZ29yaXRobS1kZWZhdWx0LWRldGFpbHMtdGVtcGxhdGVcIixcclxuICAgICAgICAgICAgICAgIG5ldzogZnVuY3Rpb24oaWRWYWw6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGlkOiBpZFZhbCB9O1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGNoYW5nZTogZnVuY3Rpb24oa2luZDogc3RyaW5nLCBvYmplY3Q6IEFsZ29yaXRobUl0ZW1CbG9ja01vZGVsKSB7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKGJsb2NrOiBBbGdvcml0aG1JdGVtQmxvY2tNb2RlbCkge1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGN1c3RvbUVkaXQ6IChibG9jazogQWxnb3JpdGhtSXRlbUJsb2NrTW9kZWwpID0+IHtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgb3B0aW9ucy5ibG9ja01hcHBpbmdzKTtcclxuICAgICAgICAgICAgdGhpcy5kZXRhaWxUZW1wbGF0ZSA9IHRoaXMuX2Jsb2NrTWFwcGluZ3MuZGV0YWlsVGVtcGxhdGU7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkb25zVGVtcGxhdGUob3B0aW9ucy5hZGRvbnNUZW1wbGF0ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3RyYW5zaXRpb25NYXBwaW5ncyA9ICQuZXh0ZW5kKHRydWUsIHt9LCB7XHJcbiAgICAgICAgICAgICAgICBpaWQ6IFwiaWlkXCIsXHJcbiAgICAgICAgICAgICAgICBleGl0MTogXCJleGl0MVwiLFxyXG4gICAgICAgICAgICAgICAgZXhpdDI6IFwiZXhpdDJcIixcclxuICAgICAgICAgICAgICAgIG5ldzogZnVuY3Rpb24oaWRWYWw6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7fTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjaGFuZ2U6IGZ1bmN0aW9uKGtpbmQ6IHN0cmluZywgb2JqZWN0OiBBbGdvcml0aG1UcmFuc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIG9wdGlvbnMudHJhbnNpdGlvbk1hcHBpbmdzKTtcclxuICAgICAgICAgICAgdGhpcy5hbGxvd0VkaXQgPSBvcHRpb25zLmFsbG93RWRpdCAhPT0gZmFsc2U7XHJcbiAgICAgICAgICAgIG9wdGlvbnMuaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBibG9jayA9IG5ldyBBbGdvcml0aG1JdGVtQmxvY2tNb2RlbChpdGVtLCB0aGlzLl9ibG9ja01hcHBpbmdzKTtcclxuICAgICAgICAgICAgICAgIGlmKGJsb2NrLmlkKCkgPiB0aGlzLl9NYXhJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX01heElkID0gYmxvY2suaWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tzLnB1c2goYmxvY2spO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgb3B0aW9ucy50cmFuc2l0aW9ucy5mb3JFYWNoKHRyYW5zaXRpb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYoa28udW53cmFwKHRyYW5zaXRpb25bdGhpcy5fdHJhbnNpdGlvbk1hcHBpbmdzLmV4aXQxXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25zLnB1c2gobmV3IEFsZ29yaXRobVRyYW5zaXRpb24odGhpcy5maW5kQmxvY2soa28udW53cmFwKHRyYW5zaXRpb25bdGhpcy5fdHJhbnNpdGlvbk1hcHBpbmdzLmlpZF0pKSwgdGhpcy5maW5kQmxvY2soa28udW53cmFwKHRyYW5zaXRpb25bdGhpcy5fdHJhbnNpdGlvbk1hcHBpbmdzLmV4aXQxXSkpLCB0cmFuc2l0aW9uLCB0aGlzLl90cmFuc2l0aW9uTWFwcGluZ3MpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKGtvLnVud3JhcCh0cmFuc2l0aW9uW3RoaXMuX3RyYW5zaXRpb25NYXBwaW5ncy5leGl0Ml0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1RyYW5zaXRpb24gPSBuZXcgQWxnb3JpdGhtVHJhbnNpdGlvbih0aGlzLmZpbmRCbG9jayhrby51bndyYXAodHJhbnNpdGlvblt0aGlzLl90cmFuc2l0aW9uTWFwcGluZ3MuaWlkXSkpLCB0aGlzLmZpbmRCbG9jayhrby51bndyYXAodHJhbnNpdGlvblt0aGlzLl90cmFuc2l0aW9uTWFwcGluZ3MuZXhpdDJdKSksIHRyYW5zaXRpb24sIHRoaXMuX3RyYW5zaXRpb25NYXBwaW5ncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VHJhbnNpdGlvbi5sYWJlbCh0aGlzLm5vVGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvbnMucHVzaChuZXdUcmFuc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3NvcnRCbG9ja3MoKTtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlTGF5b3V0KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmJsb2Nrcy5zdWJzY3JpYmUoKGNoYW5nZXMpID0+IHtcclxuICAgICAgICAgICAgICAgICg8YW55PmNoYW5nZXMpLmZvckVhY2goY2hhbmdlID0+IHRoaXMuX2Jsb2NrTWFwcGluZ3MuY2hhbmdlKGNoYW5nZS5zdGF0dXMsIGNoYW5nZS52YWx1ZSkpO1xyXG4gICAgICAgICAgICB9LCBudWxsLCBcImFycmF5Q2hhbmdlXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25zLnN1YnNjcmliZSgoY2hhbmdlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgKDxhbnk+Y2hhbmdlcykuZm9yRWFjaChjaGFuZ2UgPT4gdGhpcy5fdHJhbnNpdGlvbk1hcHBpbmdzLmNoYW5nZShjaGFuZ2Uuc3RhdHVzLCBjaGFuZ2UudmFsdWUpKTtcclxuICAgICAgICAgICAgfSwgbnVsbCwgXCJhcnJheUNoYW5nZVwiKTtcclxuICAgICAgICAgICAgdGhpcy5pc0VkaXRNb2RlLnN1YnNjcmliZShuZXdWYWx1ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZighbmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9ibG9ja01hcHBpbmdzLmNoYW5nZShcImVkaXRcIiwgdGhpcy5jdXJyZW50QmxvY2soKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2V0IG1vZGVsKCkge1xyXG4gICAgICAgICAgICB2YXIgbW9kZWwgPSB7IGl0ZW1zOiBbXSwgdHJhbnNpdGlvbnM6IFtdIH07XHJcbiAgICAgICAgICAgIHRoaXMuYmxvY2tzKCkuZm9yRWFjaChibG9jayA9PiBtb2RlbC5pdGVtcy5wdXNoKGJsb2NrLml0ZW0pKTtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9ucygpLmZvckVhY2godHJhbnNpdGlvbiA9PiBtb2RlbC50cmFuc2l0aW9ucy5wdXNoKHRyYW5zaXRpb24udHJhbnNpdGlvbikpO1xyXG4gICAgICAgICAgICByZXR1cm4gbW9kZWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBibG9ja3MgPSBrby5vYnNlcnZhYmxlQXJyYXk8QWxnb3JpdGhtSXRlbUJsb2NrTW9kZWw+KCk7XHJcbiAgICAgICAgdHJhbnNpdGlvbnMgPSBrby5vYnNlcnZhYmxlQXJyYXk8QWxnb3JpdGhtVHJhbnNpdGlvbj4oKTtcclxuXHJcbiAgICAgICAgbWF4TGV2ZWwgPSBrby5vYnNlcnZhYmxlKDEpO1xyXG4gICAgICAgIGJsb2NrTWluRGlzdGFuY2UgPSBrby5vYnNlcnZhYmxlKDIwKTtcclxuICAgICAgICBhZGRvbnNUZW1wbGF0ZSA9IGtvLm9ic2VydmFibGU8c3RyaW5nPigpO1xyXG4gICAgICAgIGFkZG9uc1dpZHRoID0ga28uY29tcHV0ZWQoKCkgPT4geyByZXR1cm4gIXRoaXMuYWRkb25zVGVtcGxhdGUoKSA/IDAgOiB0aGlzLmNvbnRhaW5lcldpZHRoKCkgKiAwLjI7IH0pO1xyXG4gICAgICAgIGNvbm5lY3RvcnNBcmVhV2lkdGggPSBrby5jb21wdXRlZCgoKSA9PiB7IHJldHVybiB0aGlzLm1heExldmVsKCkgKiB0aGlzLmJsb2NrTWluRGlzdGFuY2UoKTsgfSk7XHJcbiAgICAgICAgY29udGFpbmVyV2lkdGggPSBrby5vYnNlcnZhYmxlKDUwMCk7XHJcbiAgICAgICAgYmxvY2tXaWR0aCA9IGtvLmNvbXB1dGVkKCgpID0+IHsgcmV0dXJuICh0aGlzLmNvbnRhaW5lcldpZHRoKCkgLSB0aGlzLmNvbm5lY3RvcnNBcmVhV2lkdGgoKSAtIHRoaXMuYWRkb25zV2lkdGgoKSkgKiAwLjY7IH0pO1xyXG4gICAgICAgIGNvbW1lbnRXaWR0aCA9IGtvLmNvbXB1dGVkKCgpID0+IHsgcmV0dXJuIHRoaXMuY29udGFpbmVyV2lkdGgoKSAtIHRoaXMuYmxvY2tXaWR0aCgpIC0gdGhpcy5jb25uZWN0b3JzQXJlYVdpZHRoKCkgLSB0aGlzLmFkZG9uc1dpZHRoKCk7IH0pO1xyXG5cclxuXHJcbiAgICAgICAgZmluZEJsb2NrKGlkOiBhbnkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmxvY2tzKCkuZmlsdGVyKChibG9jaykgPT4geyByZXR1cm4gYmxvY2suaWQoKSA9PT0gaWQ7IH0pWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhZGRCbG9jayhibG9jazogQWxnb3JpdGhtSXRlbUJsb2NrTW9kZWwsIGlzQmVmb3JlOiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgICAgICAgICAgdmFyIG5ld0Jsb2NrID0gbmV3IEFsZ29yaXRobUl0ZW1CbG9ja01vZGVsKHRoaXMuX2Jsb2NrTWFwcGluZ3MubmV3KCsrdGhpcy5fTWF4SWQpLCB0aGlzLl9ibG9ja01hcHBpbmdzKTtcclxuICAgICAgICAgICAgdGhpcy5ibG9ja3Muc3BsaWNlKHRoaXMuYmxvY2tzKCkuaW5kZXhPZihibG9jaykgKyAoaXNCZWZvcmUgPyAwIDogMSksIDAsIG5ld0Jsb2NrKTtcclxuICAgICAgICAgICAgaWYoaXNCZWZvcmUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2ZpbmRUcmFuc2l0aW9uc1RvKGJsb2NrKS5mb3JFYWNoKHRyYW5zaXRpb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb24uZW5kQmxvY2sobmV3QmxvY2spO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3RyYW5zaXRpb25NYXBwaW5ncy5jaGFuZ2UoXCJlZGl0XCIsIHRyYW5zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25zLnB1c2gobmV3IEFsZ29yaXRobVRyYW5zaXRpb24obmV3QmxvY2ssIGJsb2NrLCB0aGlzLl90cmFuc2l0aW9uTWFwcGluZ3MubmV3KCsrdGhpcy5fTWF4SWQpLCB0aGlzLl90cmFuc2l0aW9uTWFwcGluZ3MpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2ZpbmRUcmFuc2l0aW9uc0Zyb20oYmxvY2spLmZvckVhY2godHJhbnNpdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbi5zdGFydEJsb2NrKG5ld0Jsb2NrKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl90cmFuc2l0aW9uTWFwcGluZ3MuY2hhbmdlKFwiZWRpdFwiLCB0cmFuc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9ucy5wdXNoKG5ldyBBbGdvcml0aG1UcmFuc2l0aW9uKGJsb2NrLCBuZXdCbG9jaywgdGhpcy5fdHJhbnNpdGlvbk1hcHBpbmdzLm5ldygrK3RoaXMuX01heElkKSwgdGhpcy5fdHJhbnNpdGlvbk1hcHBpbmdzKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlTGF5b3V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlbW92ZUJsb2NrKGJsb2NrOiBBbGdvcml0aG1JdGVtQmxvY2tNb2RlbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9maW5kVHJhbnNpdGlvbnNUbyhibG9jaykuZm9yRWFjaCh0cmFuc2l0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2ZpbmRUcmFuc2l0aW9uc0Zyb20oYmxvY2spLmZvckVhY2godHJhbnNpdGlvbkZyb20gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb24uZW5kQmxvY2sodHJhbnNpdGlvbkZyb20uZW5kQmxvY2soKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJhbnNpdGlvbk1hcHBpbmdzLmNoYW5nZShcImVkaXRcIiwgdHJhbnNpdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZpbmRUcmFuc2l0aW9uc0Zyb20oYmxvY2spLmZvckVhY2godHJhbnNpdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25zLnJlbW92ZSh0cmFuc2l0aW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuYmxvY2tzLnJlbW92ZShibG9jayk7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUxheW91dCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlZGl0QmxvY2soYmxvY2s6IEFsZ29yaXRobUl0ZW1CbG9ja01vZGVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEJsb2NrKGJsb2NrKTtcclxuICAgICAgICAgICAgaWYoIXRoaXMuX2Jsb2NrTWFwcGluZ3MuY3VzdG9tRWRpdChibG9jaykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNFZGl0TW9kZSghdGhpcy5pc0VkaXRNb2RlKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGN1cnJlbnRCbG9jayA9IGtvLm9ic2VydmFibGU8QWxnb3JpdGhtSXRlbUJsb2NrTW9kZWw+KCk7XHJcbiAgICAgICAgZGV0YWlsVGVtcGxhdGUgPSBcImFsZ29yaXRobS1kZWZhdWx0LWRldGFpbHMtdGVtcGxhdGVcIjtcclxuICAgICAgICBpc0VkaXRNb2RlID0ga28ub2JzZXJ2YWJsZShmYWxzZSk7XHJcbiAgICAgICAgYWxsb3dFZGl0OiBib29sZWFuID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgY2xpY2tCbG9jayhibG9jazogQWxnb3JpdGhtSXRlbUJsb2NrTW9kZWwpIHtcclxuICAgICAgICAgICAgdGhpcy5fYmxvY2tNYXBwaW5ncy5jbGljayhibG9jayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB1cGRhdGVUcmFuc2l0aW9uKGZyb21CbG9jazogQWxnb3JpdGhtSXRlbUJsb2NrTW9kZWwsIHRvQmxvY2s6IEFsZ29yaXRobUl0ZW1CbG9ja01vZGVsLCBsYWJlbDogc3RyaW5nLCBwcmVzZXJ2ZVRyYW5zaXRpb25zOiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgICAgICAgICAgdmFyIGZyb21UcmFuc2l0aW9ucyA9IHRoaXMuX2ZpbmRUcmFuc2l0aW9uc0Zyb20oZnJvbUJsb2NrKS5maWx0ZXIodHJhbnNpdGlvbiA9PiB0cmFuc2l0aW9uLmxhYmVsKCkgPT09IGxhYmVsKTtcclxuICAgICAgICAgICAgaWYocHJlc2VydmVUcmFuc2l0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgaWYoZnJvbVRyYW5zaXRpb25zLmZpbHRlcih0cmFuc2l0aW9uID0+IHRyYW5zaXRpb24uZW5kQmxvY2soKSA9PT0gdG9CbG9jaykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1RyYW5zaXRpb24gPSBuZXcgQWxnb3JpdGhtVHJhbnNpdGlvbihmcm9tQmxvY2ssIHRvQmxvY2ssIHRoaXMuX3RyYW5zaXRpb25NYXBwaW5ncy5uZXcoKyt0aGlzLl9NYXhJZCksIHRoaXMuX3RyYW5zaXRpb25NYXBwaW5ncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VHJhbnNpdGlvbi5sYWJlbChsYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9ucy5wdXNoKG5ld1RyYW5zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYoZnJvbVRyYW5zaXRpb25zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdUcmFuc2l0aW9uID0gbmV3IEFsZ29yaXRobVRyYW5zaXRpb24oZnJvbUJsb2NrLCB0b0Jsb2NrLCB0aGlzLl90cmFuc2l0aW9uTWFwcGluZ3MubmV3KCsrdGhpcy5fTWF4SWQpLCB0aGlzLl90cmFuc2l0aW9uTWFwcGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1RyYW5zaXRpb24ubGFiZWwobGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvbnMucHVzaChuZXdUcmFuc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyb21UcmFuc2l0aW9uc1swXS5lbmRCbG9jayh0b0Jsb2NrKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl90cmFuc2l0aW9uTWFwcGluZ3MuY2hhbmdlKFwiZWRpdFwiLCBmcm9tVHJhbnNpdGlvbnNbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDE7IGkgPCBmcm9tVHJhbnNpdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9ucy5yZW1vdmUoZnJvbVRyYW5zaXRpb25zW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlTGF5b3V0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgeWVzVGl0bGUgPSBcInllc1wiO1xyXG4gICAgICAgIHN0YXRpYyBub1RpdGxlID0gXCJub1wiO1xyXG4gICAgICAgIHN0YXRpYyBhZGRCZWZvcmVUaXRsZSA9IFwiQWRkIGJsb2NrIGJlZm9yZVwiO1xyXG4gICAgICAgIHN0YXRpYyBhZGRBZnRlclRpdGxlID0gXCJBZGQgYmxvY2sgYWZ0ZXJcIjtcclxuICAgICAgICBzdGF0aWMgdGl0bGVFZGl0ID0gXCJFZGl0IGJsb2NrXCI7XHJcbiAgICAgICAgc3RhdGljIHRpdGxlUmVtb3ZlID0gXCJSZW1vdmUgYmxvY2tcIjtcclxuICAgICAgICBzdGF0aWMgY29ubmVjdFRpdGxlID0gXCJEcmFnIHRvIGNvbm5lY3QgdG8uLi5cIjtcclxuICAgICAgICBzdGF0aWMgY2xvc2VUaXRsZSA9IFwiQ2xvc2VcIjtcclxuXHJcbiAgICAgICAgZ2V0IGFkZEJlZm9yZVRpdGxlKCkgeyByZXR1cm4gQWxnb3JpdGhtVmlld01vZGVsLmFkZEJlZm9yZVRpdGxlOyB9XHJcbiAgICAgICAgZ2V0IGFkZEFmdGVyVGl0bGUoKSB7IHJldHVybiBBbGdvcml0aG1WaWV3TW9kZWwuYWRkQWZ0ZXJUaXRsZTsgfVxyXG4gICAgICAgIGdldCBlZGl0VGl0bGUoKSB7IHJldHVybiBBbGdvcml0aG1WaWV3TW9kZWwudGl0bGVFZGl0OyB9XHJcbiAgICAgICAgZ2V0IHJlbW92ZVRpdGxlKCkgeyByZXR1cm4gQWxnb3JpdGhtVmlld01vZGVsLnRpdGxlUmVtb3ZlOyB9XHJcbiAgICAgICAgZ2V0IGNvbm5lY3RUaXRsZSgpIHsgcmV0dXJuIEFsZ29yaXRobVZpZXdNb2RlbC5jb25uZWN0VGl0bGU7IH1cclxuICAgICAgICBnZXQgeWVzVGl0bGUoKSB7IHJldHVybiBBbGdvcml0aG1WaWV3TW9kZWwueWVzVGl0bGU7IH1cclxuICAgICAgICBnZXQgbm9UaXRsZSgpIHsgcmV0dXJuIEFsZ29yaXRobVZpZXdNb2RlbC5ub1RpdGxlOyB9XHJcbiAgICAgICAgZ2V0IGNsb3NlVGl0bGUoKSB7IHJldHVybiBBbGdvcml0aG1WaWV3TW9kZWwuY2xvc2VUaXRsZTsgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBJdGVtSG9sZGVyIHtcclxuICAgICAgICBwcml2YXRlIF9tYXBwaW5ncztcclxuICAgICAgICBwcml2YXRlIF9pdGVtOiBhbnk7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKGl0ZW06IGFueSwgbWFwcGluZ3M/OiBhbnkpIHtcclxuICAgICAgICAgICAgdGhpcy5fbWFwcGluZ3MgPSAkLmV4dGVuZCh7fSwgbWFwcGluZ3MpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5faXRlbSA9IGl0ZW07XHJcblxyXG4gICAgICAgICAgICAkLmVhY2godGhpcy5fbWFwcGluZ3MsKG5hbWUsIHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2lubmVyTmFtZSA9IFwiX1wiICsgbmFtZTtcclxuICAgICAgICAgICAgICAgIHRoaXNbX2lubmVyTmFtZV0gPSBrby5pc09ic2VydmFibGUodGhpcy5faXRlbVt2YWx1ZV0pID8gdGhpcy5faXRlbVt2YWx1ZV0gOiBrby5vYnNlcnZhYmxlKHRoaXMuX2l0ZW1bdmFsdWVdKTtcclxuICAgICAgICAgICAgICAgIHRoaXNbbmFtZV0gPSBrby5jb21wdXRlZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1tfaW5uZXJOYW1lXSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGU6ICh2YWwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1tfaW5uZXJOYW1lXSh2YWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigha28uaXNPYnNlcnZhYmxlKHRoaXMuX2l0ZW1bdmFsdWVdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faXRlbVt2YWx1ZV0gPSB2YWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBnZXQgaXRlbSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZW07XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQWxnb3JpdGhtSXRlbUJsb2NrTW9kZWwgZXh0ZW5kcyBJdGVtSG9sZGVyIHtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoaXRlbTogYW55LCBtYXBwaW5ncz86IGFueSkge1xyXG4gICAgICAgICAgICBzdXBlcihpdGVtLCBtYXBwaW5ncyB8fCB7XHJcbiAgICAgICAgICAgICAgICBpZDogXCJpZFwiLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJ0ZXh0XCIsXHJcbiAgICAgICAgICAgICAgICBjb21tZW50OiBcImNvbW1lbnRcIixcclxuICAgICAgICAgICAgICAgIG51bTogXCJudW1cIixcclxuICAgICAgICAgICAgICAgIHN0YXRlOiBcInN0YXRlXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZDogS25vY2tvdXRPYnNlcnZhYmxlPG51bWJlcj47XHJcbiAgICAgICAgdGV4dDogS25vY2tvdXRPYnNlcnZhYmxlPHN0cmluZz47XHJcbiAgICAgICAgY29tbWVudDogS25vY2tvdXRPYnNlcnZhYmxlPHN0cmluZz47XHJcbiAgICAgICAgbnVtOiBLbm9ja291dE9ic2VydmFibGU8bnVtYmVyPjtcclxuICAgICAgICBzdGF0ZTogS25vY2tvdXRPYnNlcnZhYmxlPHN0cmluZz47XHJcblxyXG4gICAgICAgIGlzVGVybWluYXRvciA9IGtvLm9ic2VydmFibGUoZmFsc2UpO1xyXG4gICAgICAgIGlzQ29uZGl0aW9uID0ga28ub2JzZXJ2YWJsZShmYWxzZSk7XHJcblxyXG4gICAgICAgIHRlbXBsYXRlID0ga28uY29tcHV0ZWQoKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc0NvbmRpdGlvbigpID8gXCJhbGdvcml0aG0tYmxvY2stY29uZGl0aW9uLXRlbXBsYXRlXCIgOiBcImFsZ29yaXRobS1ibG9jay1pdGVtLXRlbXBsYXRlXCI7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGhlaWdodCA9IGtvLm9ic2VydmFibGUoNTApO1xyXG4gICAgICAgIHBvc1kgPSBrby5vYnNlcnZhYmxlKDApO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBBbGdvcml0aG1UcmFuc2l0aW9uIGV4dGVuZHMgSXRlbUhvbGRlciB7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHN0YXJ0QmxvY2s6IEFsZ29yaXRobUl0ZW1CbG9ja01vZGVsLCBlbmRCbG9jazogQWxnb3JpdGhtSXRlbUJsb2NrTW9kZWwsIGl0ZW06IGFueSwgbWFwcGluZ3M/OiBhbnkpIHtcclxuICAgICAgICAgICAgc3VwZXIoaXRlbSwgbWFwcGluZ3MgfHwge1xyXG4gICAgICAgICAgICAgICAgaWlkOiBcImlpZFwiLFxyXG4gICAgICAgICAgICAgICAgZXhpdDE6IFwiZXhpdDFcIixcclxuICAgICAgICAgICAgICAgIGV4aXQyOiBcImV4aXQyXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRCbG9jayhzdGFydEJsb2NrKTtcclxuICAgICAgICAgICAgdGhpcy5lbmRCbG9jayhlbmRCbG9jayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBnZXQgdHJhbnNpdGlvbigpIHtcclxuICAgICAgICAgICAgaWYodGhpcy5sYWJlbCgpICE9PSBBbGdvcml0aG1WaWV3TW9kZWwubm9UaXRsZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDxJVHJhbnNpdGlvbj57IGlpZDogdGhpcy5zdGFydEJsb2NrKCkuaWQoKSwgZXhpdDE6IHRoaXMuZW5kQmxvY2soKS5pZCgpLCBleGl0MjogdW5kZWZpbmVkIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gPElUcmFuc2l0aW9uPnsgaWlkOiB0aGlzLnN0YXJ0QmxvY2soKS5pZCgpLCBleGl0MTogdW5kZWZpbmVkLCBleGl0MjogdGhpcy5lbmRCbG9jaygpLmlkKCkgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhcnRCbG9jayA9IGtvLm9ic2VydmFibGU8QWxnb3JpdGhtSXRlbUJsb2NrTW9kZWw+KCk7XHJcbiAgICAgICAgZW5kQmxvY2sgPSBrby5vYnNlcnZhYmxlPEFsZ29yaXRobUl0ZW1CbG9ja01vZGVsPigpO1xyXG4gICAgICAgIHR5cGUgPSBrby5vYnNlcnZhYmxlKFwiZGlyZWN0XCIpO1xyXG4gICAgICAgIGRpcmVjdGlvbiA9IGtvLm9ic2VydmFibGUoXCJkb3duXCIpO1xyXG4gICAgICAgIGxldmVsID0ga28ub2JzZXJ2YWJsZSgxKTtcclxuICAgICAgICBsYWJlbCA9IGtvLm9ic2VydmFibGUoKTtcclxuXHJcbiAgICAgICAgdGVtcGxhdGUgPSBrby5jb21wdXRlZCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMudHlwZSgpICE9PSBcImRpcmVjdFwiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb24oKSA9PT0gXCJkb3duXCIgPyBcImFsZ29yaXRobS10ci1mYXItZG93bi10ZW1wbGF0ZVwiIDogXCJhbGdvcml0aG0tdHItZmFyLXVwLXRlbXBsYXRlXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFwiYWxnb3JpdGhtLXRyLWRpcmVjdC10ZW1wbGF0ZVwiO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCA9IEFsZ29yaXRobTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zb3VyY2VzL2FsZ29yaXRobS50cyIsImltcG9ydCAqIGFzICQgZnJvbSBcImpxdWVyeVwiO1xyXG5pbXBvcnQgKiBhcyBrbyBmcm9tIFwia25vY2tvdXRcIjtcclxuXHJcbmltcG9ydCBcIi4vYWxnb3JpdGhtLnNjc3NcIjtcclxudmFyIHRlbXBsYXRlQSA9IHJlcXVpcmUoXCJ0ZXh0LWxvYWRlciEuL2FsZ29yaXRobS5odG1sXCIpO1xyXG52YXIgdGVtcGxhdGVCID0gcmVxdWlyZShcInRleHQtbG9hZGVyIS4vYmxvY2tzLmh0bWxcIik7XHJcbnZhciB0ZW1wbGF0ZVQgPSByZXF1aXJlKFwidGV4dC1sb2FkZXIhLi90cmFuc2l0aW9ucy5odG1sXCIpO1xyXG5cclxuaW1wb3J0IHsgQWxnb3JpdGhtVmlld01vZGVsLCBBbGdvcml0aG1JdGVtQmxvY2tNb2RlbCB9IGZyb20gXCIuL2FsZ29yaXRobVwiO1xyXG5cclxubW9kdWxlIEFsZ29yaXRobSB7XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZyYWdtZW50KGh0bWxTdHJpbmc6IHN0cmluZykge1xyXG4gICAgICAgIHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcclxuICAgICAgICAgICAgdGVtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGVtcC5pbm5lckhUTUwgPSBodG1sU3RyaW5nO1xyXG4gICAgICAgIHdoaWxlICh0ZW1wLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQodGVtcC5maXJzdENoaWxkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZyYWdtZW50O1xyXG4gICAgfVxyXG4gICAgZG9jdW1lbnQuYm9keS5pbnNlcnRCZWZvcmUoY3JlYXRlRnJhZ21lbnQodGVtcGxhdGVBKSwgZG9jdW1lbnQuYm9keS5jaGlsZE5vZGVzWzBdKTtcclxuICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKGNyZWF0ZUZyYWdtZW50KHRlbXBsYXRlQiksIGRvY3VtZW50LmJvZHkuY2hpbGROb2Rlc1swXSk7XHJcbiAgICBkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZShjcmVhdGVGcmFnbWVudCh0ZW1wbGF0ZVQpLCBkb2N1bWVudC5ib2R5LmNoaWxkTm9kZXNbMF0pO1xyXG5cclxuICAgIGtvLmJpbmRpbmdIYW5kbGVyc1tcImFsZ29yaXRobVwiXSA9IHtcclxuICAgICAgICBpbml0OiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5ncywgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IGtvLnVud3JhcCh2YWx1ZUFjY2Vzc29yKCkpO1xyXG4gICAgICAgICAgICB2YXIgJGFsZ29yaXRobVRlbXBsYXRlID0gJChcIiNhbGdvcml0aG0tdmlldy10ZW1wbGF0ZVwiKSxcclxuICAgICAgICAgICAgICAgIGFsZ29yaXRobVZpZXdIb2xkZXJXaWR0aCA9IGtvLm9ic2VydmFibGUoNTAwKSxcclxuICAgICAgICAgICAgICAgIG1vZGVsID0ga28ub2JzZXJ2YWJsZShuZXcgQWxnb3JpdGhtVmlld01vZGVsKGtvLnVud3JhcChvcHRpb25zLnZhbHVlKSkpLFxyXG4gICAgICAgICAgICAgICAgdmFsdWVTdWJzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICBjaGlsZENvbnRleHQgPSBiaW5kaW5nQ29udGV4dC5jcmVhdGVDaGlsZENvbnRleHQobW9kZWwpO1xyXG5cclxuICAgICAgICAgICAgaWYoa28uaXNTdWJzY3JpYmFibGUob3B0aW9ucy52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlU3Vic2NyaXB0aW9uID0gb3B0aW9ucy52YWx1ZS5zdWJzY3JpYmUobmV3QWxnb3JpdGhtID0+IG1vZGVsKG5ldyBBbGdvcml0aG1WaWV3TW9kZWwobmV3QWxnb3JpdGhtKSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkKGVsZW1lbnQpLmNoaWxkcmVuKCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICQoZWxlbWVudCkuYXBwZW5kKCQoJGFsZ29yaXRobVRlbXBsYXRlLnRleHQoKSkpO1xyXG5cclxuICAgICAgICAgICAga28uYXBwbHlCaW5kaW5nc1RvRGVzY2VuZGFudHMoY2hpbGRDb250ZXh0LCBlbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbW9kZWwoKS5jb250YWluZXJXaWR0aCgkKGVsZW1lbnQpLmZpbmQoXCIuYWxnb3JpdGhtLXZpZXctaG9sZGVyXCIpLndpZHRoKCkpO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhtb2RlbC5jb250YWluZXJXaWR0aCgpKTtcclxuICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICAgICAga28udXRpbHMuZG9tTm9kZURpc3Bvc2FsLmFkZERpc3Bvc2VDYWxsYmFjayhlbGVtZW50LCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZCk7XHJcbiAgICAgICAgICAgICAgICBpZih2YWx1ZVN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlU3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGNvbnRyb2xzRGVzY2VuZGFudEJpbmRpbmdzOiB0cnVlIH07XHJcbiAgICAgICAgfSxcclxuICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzLCB2aWV3TW9kZWwsIGJpbmRpbmdDb250ZXh0KSB7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBrby5iaW5kaW5nSGFuZGxlcnNbXCJhbGdvZGV0YWlsc1wiXSA9IHtcclxuICAgICAgICBpbml0OiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5ncywgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgbW9kZWwgPSBrby51bndyYXA8QWxnb3JpdGhtVmlld01vZGVsPih2YWx1ZUFjY2Vzc29yKCkpO1xyXG4gICAgICAgICAgICB2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgJGFsZ29yaXRobVRlbXBsYXRlID0gJChcIiNhbGdvcml0aG0tZGV0YWlscy10ZW1wbGF0ZVwiKSxcclxuICAgICAgICAgICAgICAgIGNoaWxkQ29udGV4dCA9IGJpbmRpbmdDb250ZXh0LmNyZWF0ZUNoaWxkQ29udGV4dChtb2RlbCk7XHJcblxyXG4gICAgICAgICAgICAkKGVsZW1lbnQpLmNoaWxkcmVuKCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICQoZWxlbWVudCkuYXBwZW5kKCQoJGFsZ29yaXRobVRlbXBsYXRlLnRleHQoKSkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IG1vZGVsLmlzRWRpdE1vZGUuc3Vic2NyaWJlKHZhbHVlID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBvcmlnaW5hbEJsb2NrUmVjdCA9IHsgdG9wOiBtb2RlbC5jdXJyZW50QmxvY2soKS5wb3NZKCkgKyBcInB4XCIsIGxlZnQ6IG1vZGVsLmNvbm5lY3RvcnNBcmVhV2lkdGgoKSArIFwicHhcIiwgaGVpZ2h0OiBtb2RlbC5jdXJyZW50QmxvY2soKS5oZWlnaHQoKSArIFwicHhcIiwgd2lkdGg6IG1vZGVsLmJsb2NrV2lkdGgoKSArIFwicHhcIiB9O1xyXG4gICAgICAgICAgICAgICAgaWYodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5jc3Mob3JpZ2luYWxCbG9ja1JlY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5hbmltYXRlKHsgXCJ0b3BcIjogXCItPVwiICsgKG1vZGVsLmN1cnJlbnRCbG9jaygpLnBvc1koKSA+IDIwMCA/IDIwMCA6IG1vZGVsLmN1cnJlbnRCbG9jaygpLnBvc1koKSkgKyBcInB4XCIsIFwibGVmdFwiOiBcIjBcIiwgXCJoZWlnaHRcIjogXCIrPTQwMHB4XCIsIFwid2lkdGhcIjogXCIxMDAlXCIgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5hbmltYXRlKG9yaWdpbmFsQmxvY2tSZWN0LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAga28udXRpbHMuZG9tTm9kZURpc3Bvc2FsLmFkZERpc3Bvc2VDYWxsYmFjayhlbGVtZW50LCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAga28uYXBwbHlCaW5kaW5nc1RvRGVzY2VuZGFudHMoY2hpbGRDb250ZXh0LCBlbGVtZW50KTtcclxuICAgICAgICAgICAgcmV0dXJuIHsgY29udHJvbHNEZXNjZW5kYW50QmluZGluZ3M6IHRydWUgfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGtvLmJpbmRpbmdIYW5kbGVyc1tcImRyYWdnYWJsZWJsb2Nrc1wiXSA9IHtcclxuICAgICAgICBpbml0OiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5ncywgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgbW9kZWwgPSBrby51bndyYXA8QWxnb3JpdGhtVmlld01vZGVsPih2YWx1ZUFjY2Vzc29yKCkpLFxyXG4gICAgICAgICAgICAgICAgJGVsZW1lbnQgPSAkKGVsZW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgZHJhZ0V2ZW50cyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBcImRyYWdzdGFydFwiOiAoZXY6IEpRdWVyeUV2ZW50T2JqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gPERyYWdFdmVudD4oPGFueT5ldi5vcmlnaW5hbEV2ZW50KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrID0ga28uZGF0YUZvcihvcmlnaW5hbEV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGJsb2NrIGluc3RhbmNlb2YgQWxnb3JpdGhtSXRlbUJsb2NrTW9kZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uVHlwZSA9ICQoZXYudGFyZ2V0KS5hdHRyKFwiZGF0YS10cmFuc2l0aW9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9IFwibGlua1wiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YShcInRleHRcIiwgSlNPTi5zdHJpbmdpZnkoeyBcInR5cGVcIjogXCJBbGdvcml0aG1JdGVtQmxvY2tNb2RlbFwiLCBcImlkXCI6ICg8QWxnb3JpdGhtSXRlbUJsb2NrTW9kZWw+YmxvY2spLmlkKCksIFwidHJhbnNpdGlvblR5cGVcIjogdHJhbnNpdGlvblR5cGUgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9ldi5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKGV2LnRhcmdldCwgMTAwLCAxMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIFwiZHJhZ292ZXJcIjogKGV2OiBKUXVlcnlFdmVudE9iamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihrby5kYXRhRm9yKGV2LnRhcmdldCkgaW5zdGFuY2VvZiBBbGdvcml0aG1JdGVtQmxvY2tNb2RlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJkcm9wXCI6IChldjogSlF1ZXJ5RXZlbnRPYmplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsRXZlbnQgPSA8RHJhZ0V2ZW50Pig8YW55PmV2Lm9yaWdpbmFsRXZlbnQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0QmxvY2sgPSBrby5kYXRhRm9yKG9yaWdpbmFsRXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodGFyZ2V0QmxvY2sgaW5zdGFuY2VvZiBBbGdvcml0aG1JdGVtQmxvY2tNb2RlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRyYWdEYXRhU3RyaW5nID0gb3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YShcInRleHRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkcmFnRGF0YSA9IEpTT04ucGFyc2UoZHJhZ0RhdGFTdHJpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRyYWdEYXRhLnR5cGUgPT09ICdBbGdvcml0aG1JdGVtQmxvY2tNb2RlbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZUJsb2NrID0gbW9kZWwuZmluZEJsb2NrKGRyYWdEYXRhLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoISFzb3VyY2VCbG9jayAmJiAhIXRhcmdldEJsb2NrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbC51cGRhdGVUcmFuc2l0aW9uKHNvdXJjZUJsb2NrLCB0YXJnZXRCbG9jaywgZHJhZ0RhdGEudHJhbnNpdGlvblR5cGUsIGV2LmN0cmxLZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaChleCkgeyB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAkZWxlbWVudC5iaW5kKGRyYWdFdmVudHMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG59IFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NvdXJjZXMvYmluZGluZ3MudHMiXSwic291cmNlUm9vdCI6IiJ9