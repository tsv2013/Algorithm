<script type="text/html" id="algorithm-view-template">
    <!-- ko with: $data -->
    <div class="algorithm-view-holder">
        <!-- ko if: addonsTemplate -->
        <div class="algorithm-addons" data-bind="style: { 'width': addonsWidth() + 'px' }">
            <!-- ko foreach: blocks -->
            <div class="algorithm-addon-holder" data-bind="style: { 'height': height() + 'px', 'marginBottom': $parent.blockMinDistance() + 'px' }">
                <!-- ko template: $parent.addonsTemplate -->
                <!-- /ko -->
            </div>
            <!-- /ko -->
        </div>
        <!-- /ko -->
        <div class="algorithm-transitions" data-bind="style: { 'left': addonsWidth() + 'px', 'width': connectorsAreaWidth() + 'px' }">
            <!-- ko foreach: transitions -->
            <!-- ko template: template -->
            <!-- /ko -->
            <!-- /ko -->
        </div>
        <div class="algorithm-blocks" data-bind="draggableblocks: $data, style: { 'left': addonsWidth() + connectorsAreaWidth() + 'px', width: blockWidth() + 'px' }">
            <!-- ko foreach: blocks -->
            <!-- ko template: template -->
            <!-- /ko -->
            <!-- /ko -->
        </div>
        <div class="algorithm-comments" data-bind="style: { 'top': -blockMinDistance() + 'px', 'left': addonsWidth() + connectorsAreaWidth() + blockWidth() + 'px', width: commentWidth() + 'px' }">
            <!-- ko foreach: blocks -->
            <div style="position: relative" data-bind="style: { 'height': height() + 'px', 'lineHeight': height() + 'px', 'margin': $parent.blockMinDistance() + 'px 0' }">
                <!-- ko if: comment -->
                <div style="position:absolute; top: 0; left:0; width: 40px; height: 100%">
                    <svg width="100%" height="100%">
                        <line y1="50%" y2="50%" x1="0%" x2="100%" style="stroke:black;stroke-width:0.5;stroke-dasharray:10 5;"></line>
                    </svg>
                </div>
                <div class="algorithm-comment-content">
                    <span data-bind="text: comment"></span>
                </div>
                <!-- /ko -->
            </div>
            <!-- /ko -->
        </div>
        <div class="algorithm-block-details-container" data-bind="algodetails: $data">
        </div>
    </div>
    <!-- /ko -->
</script>

<script type="text/html" id="algorithm-details-template">
    <div class="algorithm-details-holder">
        <div class="algorithm-details-template-holder">
            <!-- ko template: { name: detailTemplate, data: currentBlock } -->
            <!-- /ko -->
        </div>
        <div class="algorithm-details-actions-holder">
            <div class="algorithm-button" data-bind="click: function() { $data.isEditMode(false); }, text: Algorithm.AlgorithmViewModel.closeTitle"></div>
        </div>
    </div>
</script>

<script type="text/html" id="algorithm-default-details-template">
    <!-- ko with: $data -->
    <div class="algo-detail-field">
        <span class="algo-detail-label">Text: </span>
        <div class="algo-detail-value-wrapper">
            <input class="algo-detail-value" data-bind="value: text" />
        </div>
    </div>
    <div class="algo-detail-field">
        <span class="algo-detail-label">Comment: </span>
        <div class="algo-detail-value-wrapper">
            <input class="algo-detail-value" data-bind="value: comment" />
        </div>
    </div>
    <div class="algo-detail-field">
        <span class="algo-detail-label">State: </span>
        <div class="algo-detail-value-wrapper">
            <select data-bind="options: [ 'inprogress', 'completed' ], value: state, optionsCaption: 'Choose state...'"></select>
        </div>
    </div>
    <div class="algo-detail-field">
        <span class="algo-detail-label">Is Condition: </span>
        <div class="algo-detail-value-wrapper">
            <input type="checkbox" data-bind="checked: isCondition" />
        </div>
    </div>
    <!-- /ko -->
</script>